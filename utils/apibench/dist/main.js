var fd=Object.create;var Ca=Object.defineProperty;var dd=Object.getOwnPropertyDescriptor;var hd=Object.getOwnPropertyNames;var pd=Object.getPrototypeOf,md=Object.prototype.hasOwnProperty;var Wn=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var Fr=(t,e)=>()=>(t&&(e=t(t=0)),e);var Ea=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),yd=(t,e)=>{for(var r in e)Ca(t,r,{get:e[r],enumerable:!0})},gd=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of hd(e))!md.call(t,a)&&a!==r&&Ca(t,a,{get:()=>e[a],enumerable:!(i=dd(e,a))||i.enumerable});return t};var Is=(t,e,r)=>(r=t!=null?fd(pd(t)):{},gd(e||!t||!t.__esModule?Ca(r,"default",{value:t,enumerable:!0}):r,t));var Ds=Ea((jn,Ns)=>{(function(t,e){typeof jn=="object"&&typeof Ns<"u"?e(jn):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(jn,function(t){"use strict";function e(){}function r(n){return typeof n=="object"&&n!==null||typeof n=="function"}let i=e;function a(n,o){try{Object.defineProperty(n,"name",{value:o,configurable:!0})}catch{}}let s=Promise,l=Promise.prototype.then,c=Promise.reject.bind(s);function d(n){return new s(n)}function f(n){return d(o=>o(n))}function p(n){return c(n)}function g(n,o,u){return l.call(n,o,u)}function _(n,o,u){g(g(n,o,u),void 0,i)}function S(n,o){_(n,o)}function v(n,o){_(n,void 0,o)}function C(n,o,u){return g(n,o,u)}function P(n){g(n,void 0,i)}let N=n=>{if(typeof queueMicrotask=="function")N=queueMicrotask;else{let o=f(void 0);N=u=>g(o,u)}return N(n)};function W(n,o,u){if(typeof n!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(n,o,u)}function U(n,o,u){try{return f(W(n,o,u))}catch(h){return p(h)}}let $=16384;class M{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(o){let u=this._back,h=u;u._elements.length===$-1&&(h={_elements:[],_next:void 0}),u._elements.push(o),h!==u&&(this._back=h,u._next=h),++this._size}shift(){let o=this._front,u=o,h=this._cursor,m=h+1,y=o._elements,b=y[h];return m===$&&(u=o._next,m=0),--this._size,this._cursor=m,o!==u&&(this._front=u),y[h]=void 0,b}forEach(o){let u=this._cursor,h=this._front,m=h._elements;for(;(u!==m.length||h._next!==void 0)&&!(u===m.length&&(h=h._next,m=h._elements,u=0,m.length===0));)o(m[u]),++u}peek(){let o=this._front,u=this._cursor;return o._elements[u]}}let V=Symbol("[[AbortSteps]]"),ce=Symbol("[[ErrorSteps]]"),Te=Symbol("[[CancelSteps]]"),$i=Symbol("[[PullSteps]]"),Li=Symbol("[[ReleaseSteps]]");function yo(n,o){n._ownerReadableStream=o,o._reader=n,o._state==="readable"?ji(n):o._state==="closed"?vc(n):go(n,o._storedError)}function Wi(n,o){let u=n._ownerReadableStream;return Ce(u,o)}function ze(n){let o=n._ownerReadableStream;o._state==="readable"?Ui(n,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):wc(n,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),o._readableStreamController[Li](),o._reader=void 0,n._ownerReadableStream=void 0}function dn(n){return new TypeError("Cannot "+n+" a stream using a released reader")}function ji(n){n._closedPromise=d((o,u)=>{n._closedPromise_resolve=o,n._closedPromise_reject=u})}function go(n,o){ji(n),Ui(n,o)}function vc(n){ji(n),bo(n)}function Ui(n,o){n._closedPromise_reject!==void 0&&(P(n._closedPromise),n._closedPromise_reject(o),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0)}function wc(n,o){go(n,o)}function bo(n){n._closedPromise_resolve!==void 0&&(n._closedPromise_resolve(void 0),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0)}let _o=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},Sc=Math.trunc||function(n){return n<0?Math.ceil(n):Math.floor(n)};function xc(n){return typeof n=="object"||typeof n=="function"}function Oe(n,o){if(n!==void 0&&!xc(n))throw new TypeError(`${o} is not an object.`)}function me(n,o){if(typeof n!="function")throw new TypeError(`${o} is not a function.`)}function Tc(n){return typeof n=="object"&&n!==null||typeof n=="function"}function vo(n,o){if(!Tc(n))throw new TypeError(`${o} is not an object.`)}function Me(n,o,u){if(n===void 0)throw new TypeError(`Parameter ${o} is required in '${u}'.`)}function Vi(n,o,u){if(n===void 0)throw new TypeError(`${o} is required in '${u}'.`)}function Hi(n){return Number(n)}function wo(n){return n===0?0:n}function Rc(n){return wo(Sc(n))}function Zi(n,o){let h=Number.MAX_SAFE_INTEGER,m=Number(n);if(m=wo(m),!_o(m))throw new TypeError(`${o} is not a finite number`);if(m=Rc(m),m<0||m>h)throw new TypeError(`${o} is outside the accepted range of 0 to ${h}, inclusive`);return!_o(m)||m===0?0:m}function Yi(n,o){if(!ot(n))throw new TypeError(`${o} is not a ReadableStream.`)}function Kt(n){return new et(n)}function So(n,o){n._reader._readRequests.push(o)}function Gi(n,o,u){let m=n._reader._readRequests.shift();u?m._closeSteps():m._chunkSteps(o)}function hn(n){return n._reader._readRequests.length}function xo(n){let o=n._reader;return!(o===void 0||!tt(o))}class et{constructor(o){if(Me(o,1,"ReadableStreamDefaultReader"),Yi(o,"First parameter"),st(o))throw new TypeError("This stream has already been locked for exclusive reading by another reader");yo(this,o),this._readRequests=new M}get closed(){return tt(this)?this._closedPromise:p(pn("closed"))}cancel(o=void 0){return tt(this)?this._ownerReadableStream===void 0?p(dn("cancel")):Wi(this,o):p(pn("cancel"))}read(){if(!tt(this))return p(pn("read"));if(this._ownerReadableStream===void 0)return p(dn("read from"));let o,u,h=d((y,b)=>{o=y,u=b});return Er(this,{_chunkSteps:y=>o({value:y,done:!1}),_closeSteps:()=>o({value:void 0,done:!0}),_errorSteps:y=>u(y)}),h}releaseLock(){if(!tt(this))throw pn("releaseLock");this._ownerReadableStream!==void 0&&Cc(this)}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(et.prototype.cancel,"cancel"),a(et.prototype.read,"read"),a(et.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(et.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function tt(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readRequests")?!1:n instanceof et}function Er(n,o){let u=n._ownerReadableStream;u._disturbed=!0,u._state==="closed"?o._closeSteps():u._state==="errored"?o._errorSteps(u._storedError):u._readableStreamController[$i](o)}function Cc(n){ze(n);let o=new TypeError("Reader was released");To(n,o)}function To(n,o){let u=n._readRequests;n._readRequests=new M,u.forEach(h=>{h._errorSteps(o)})}function pn(n){return new TypeError(`ReadableStreamDefaultReader.prototype.${n} can only be used on a ReadableStreamDefaultReader`)}let Ec=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ro{constructor(o,u){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=o,this._preventCancel=u}next(){let o=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?C(this._ongoingPromise,o,o):o(),this._ongoingPromise}return(o){let u=()=>this._returnSteps(o);return this._ongoingPromise?C(this._ongoingPromise,u,u):u()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let o=this._reader,u,h,m=d((b,T)=>{u=b,h=T});return Er(o,{_chunkSteps:b=>{this._ongoingPromise=void 0,N(()=>u({value:b,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ze(o),u({value:void 0,done:!0})},_errorSteps:b=>{this._ongoingPromise=void 0,this._isFinished=!0,ze(o),h(b)}}),m}_returnSteps(o){if(this._isFinished)return Promise.resolve({value:o,done:!0});this._isFinished=!0;let u=this._reader;if(!this._preventCancel){let h=Wi(u,o);return ze(u),C(h,()=>({value:o,done:!0}))}return ze(u),f({value:o,done:!0})}}let Co={next(){return Eo(this)?this._asyncIteratorImpl.next():p(ko("next"))},return(n){return Eo(this)?this._asyncIteratorImpl.return(n):p(ko("return"))}};Object.setPrototypeOf(Co,Ec);function kc(n,o){let u=Kt(n),h=new Ro(u,o),m=Object.create(Co);return m._asyncIteratorImpl=h,m}function Eo(n){if(!r(n)||!Object.prototype.hasOwnProperty.call(n,"_asyncIteratorImpl"))return!1;try{return n._asyncIteratorImpl instanceof Ro}catch{return!1}}function ko(n){return new TypeError(`ReadableStreamAsyncIterator.${n} can only be used on a ReadableSteamAsyncIterator`)}let Ao=Number.isNaN||function(n){return n!==n};var Qi,Xi,Ki;function kr(n){return n.slice()}function Po(n,o,u,h,m){new Uint8Array(n).set(new Uint8Array(u,h,m),o)}let $e=n=>(typeof n.transfer=="function"?$e=o=>o.transfer():typeof structuredClone=="function"?$e=o=>structuredClone(o,{transfer:[o]}):$e=o=>o,$e(n)),rt=n=>(typeof n.detached=="boolean"?rt=o=>o.detached:rt=o=>o.byteLength===0,rt(n));function Oo(n,o,u){if(n.slice)return n.slice(o,u);let h=u-o,m=new ArrayBuffer(h);return Po(m,0,n,o,h),m}function mn(n,o){let u=n[o];if(u!=null){if(typeof u!="function")throw new TypeError(`${String(o)} is not a function`);return u}}function Ac(n){let o={[Symbol.iterator]:()=>n.iterator},u=async function*(){return yield*o}(),h=u.next;return{iterator:u,nextMethod:h,done:!1}}let Ji=(Ki=(Qi=Symbol.asyncIterator)!==null&&Qi!==void 0?Qi:(Xi=Symbol.for)===null||Xi===void 0?void 0:Xi.call(Symbol,"Symbol.asyncIterator"))!==null&&Ki!==void 0?Ki:"@@asyncIterator";function Io(n,o="sync",u){if(u===void 0)if(o==="async"){if(u=mn(n,Ji),u===void 0){let y=mn(n,Symbol.iterator),b=Io(n,"sync",y);return Ac(b)}}else u=mn(n,Symbol.iterator);if(u===void 0)throw new TypeError("The object is not iterable");let h=W(u,n,[]);if(!r(h))throw new TypeError("The iterator method must return an object");let m=h.next;return{iterator:h,nextMethod:m,done:!1}}function Pc(n){let o=W(n.nextMethod,n.iterator,[]);if(!r(o))throw new TypeError("The iterator.next() method must return an object");return o}function Oc(n){return!!n.done}function Ic(n){return n.value}function Bc(n){return!(typeof n!="number"||Ao(n)||n<0)}function Bo(n){let o=Oo(n.buffer,n.byteOffset,n.byteOffset+n.byteLength);return new Uint8Array(o)}function ea(n){let o=n._queue.shift();return n._queueTotalSize-=o.size,n._queueTotalSize<0&&(n._queueTotalSize=0),o.value}function ta(n,o,u){if(!Bc(u)||u===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");n._queue.push({value:o,size:u}),n._queueTotalSize+=u}function Nc(n){return n._queue.peek().value}function nt(n){n._queue=new M,n._queueTotalSize=0}function No(n){return n===DataView}function Dc(n){return No(n.constructor)}function qc(n){return No(n)?1:n.BYTES_PER_ELEMENT}class vt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ra(this))throw sa("view");return this._view}respond(o){if(!ra(this))throw sa("respond");if(Me(o,1,"respond"),o=Zi(o,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(rt(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");_n(this._associatedReadableByteStreamController,o)}respondWithNewView(o){if(!ra(this))throw sa("respondWithNewView");if(Me(o,1,"respondWithNewView"),!ArrayBuffer.isView(o))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(rt(o.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");vn(this._associatedReadableByteStreamController,o)}}Object.defineProperties(vt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),a(vt.prototype.respond,"respond"),a(vt.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(vt.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Le{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!wt(this))throw Pr("byobRequest");return oa(this)}get desiredSize(){if(!wt(this))throw Pr("desiredSize");return Uo(this)}close(){if(!wt(this))throw Pr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be closed`);Ar(this)}enqueue(o){if(!wt(this))throw Pr("enqueue");if(Me(o,1,"enqueue"),!ArrayBuffer.isView(o))throw new TypeError("chunk must be an array buffer view");if(o.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(o.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let u=this._controlledReadableByteStream._state;if(u!=="readable")throw new TypeError(`The stream (in ${u} state) is not in the readable state and cannot be enqueued to`);bn(this,o)}error(o=void 0){if(!wt(this))throw Pr("error");ye(this,o)}[Te](o){Do(this),nt(this);let u=this._cancelAlgorithm(o);return gn(this),u}[$i](o){let u=this._controlledReadableByteStream;if(this._queueTotalSize>0){jo(this,o);return}let h=this._autoAllocateChunkSize;if(h!==void 0){let m;try{m=new ArrayBuffer(h)}catch(b){o._errorSteps(b);return}let y={buffer:m,bufferByteLength:h,byteOffset:0,byteLength:h,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(y)}So(u,o),St(this)}[Li](){if(this._pendingPullIntos.length>0){let o=this._pendingPullIntos.peek();o.readerType="none",this._pendingPullIntos=new M,this._pendingPullIntos.push(o)}}}Object.defineProperties(Le.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),a(Le.prototype.close,"close"),a(Le.prototype.enqueue,"enqueue"),a(Le.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Le.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function wt(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledReadableByteStream")?!1:n instanceof Le}function ra(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_associatedReadableByteStreamController")?!1:n instanceof vt}function St(n){if(!Lc(n))return;if(n._pulling){n._pullAgain=!0;return}n._pulling=!0;let u=n._pullAlgorithm();_(u,()=>(n._pulling=!1,n._pullAgain&&(n._pullAgain=!1,St(n)),null),h=>(ye(n,h),null))}function Do(n){ia(n),n._pendingPullIntos=new M}function na(n,o){let u=!1;n._state==="closed"&&(u=!0);let h=qo(o);o.readerType==="default"?Gi(n,h,u):Zc(n,h,u)}function qo(n){let o=n.bytesFilled,u=n.elementSize;return new n.viewConstructor(n.buffer,n.byteOffset,o/u)}function yn(n,o,u,h){n._queue.push({buffer:o,byteOffset:u,byteLength:h}),n._queueTotalSize+=h}function Fo(n,o,u,h){let m;try{m=Oo(o,u,u+h)}catch(y){throw ye(n,y),y}yn(n,m,0,h)}function zo(n,o){o.bytesFilled>0&&Fo(n,o.buffer,o.byteOffset,o.bytesFilled),Jt(n)}function Mo(n,o){let u=Math.min(n._queueTotalSize,o.byteLength-o.bytesFilled),h=o.bytesFilled+u,m=u,y=!1,b=h%o.elementSize,T=h-b;T>=o.minimumFill&&(m=T-o.bytesFilled,y=!0);let B=n._queue;for(;m>0;){let k=B.peek(),D=Math.min(m,k.byteLength),z=o.byteOffset+o.bytesFilled;Po(o.buffer,z,k.buffer,k.byteOffset,D),k.byteLength===D?B.shift():(k.byteOffset+=D,k.byteLength-=D),n._queueTotalSize-=D,$o(n,D,o),m-=D}return y}function $o(n,o,u){u.bytesFilled+=o}function Lo(n){n._queueTotalSize===0&&n._closeRequested?(gn(n),qr(n._controlledReadableByteStream)):St(n)}function ia(n){n._byobRequest!==null&&(n._byobRequest._associatedReadableByteStreamController=void 0,n._byobRequest._view=null,n._byobRequest=null)}function aa(n){for(;n._pendingPullIntos.length>0;){if(n._queueTotalSize===0)return;let o=n._pendingPullIntos.peek();Mo(n,o)&&(Jt(n),na(n._controlledReadableByteStream,o))}}function Fc(n){let o=n._controlledReadableByteStream._reader;for(;o._readRequests.length>0;){if(n._queueTotalSize===0)return;let u=o._readRequests.shift();jo(n,u)}}function zc(n,o,u,h){let m=n._controlledReadableByteStream,y=o.constructor,b=qc(y),{byteOffset:T,byteLength:B}=o,k=u*b,D;try{D=$e(o.buffer)}catch(H){h._errorSteps(H);return}let z={buffer:D,bufferByteLength:D.byteLength,byteOffset:T,byteLength:B,bytesFilled:0,minimumFill:k,elementSize:b,viewConstructor:y,readerType:"byob"};if(n._pendingPullIntos.length>0){n._pendingPullIntos.push(z),Zo(m,h);return}if(m._state==="closed"){let H=new y(z.buffer,z.byteOffset,0);h._closeSteps(H);return}if(n._queueTotalSize>0){if(Mo(n,z)){let H=qo(z);Lo(n),h._chunkSteps(H);return}if(n._closeRequested){let H=new TypeError("Insufficient bytes to fill elements in the given buffer");ye(n,H),h._errorSteps(H);return}}n._pendingPullIntos.push(z),Zo(m,h),St(n)}function Mc(n,o){o.readerType==="none"&&Jt(n);let u=n._controlledReadableByteStream;if(ua(u))for(;Yo(u)>0;){let h=Jt(n);na(u,h)}}function $c(n,o,u){if($o(n,o,u),u.readerType==="none"){zo(n,u),aa(n);return}if(u.bytesFilled<u.minimumFill)return;Jt(n);let h=u.bytesFilled%u.elementSize;if(h>0){let m=u.byteOffset+u.bytesFilled;Fo(n,u.buffer,m-h,h)}u.bytesFilled-=h,na(n._controlledReadableByteStream,u),aa(n)}function Wo(n,o){let u=n._pendingPullIntos.peek();ia(n),n._controlledReadableByteStream._state==="closed"?Mc(n,u):$c(n,o,u),St(n)}function Jt(n){return n._pendingPullIntos.shift()}function Lc(n){let o=n._controlledReadableByteStream;return o._state!=="readable"||n._closeRequested||!n._started?!1:!!(xo(o)&&hn(o)>0||ua(o)&&Yo(o)>0||Uo(n)>0)}function gn(n){n._pullAlgorithm=void 0,n._cancelAlgorithm=void 0}function Ar(n){let o=n._controlledReadableByteStream;if(!(n._closeRequested||o._state!=="readable")){if(n._queueTotalSize>0){n._closeRequested=!0;return}if(n._pendingPullIntos.length>0){let u=n._pendingPullIntos.peek();if(u.bytesFilled%u.elementSize!==0){let h=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ye(n,h),h}}gn(n),qr(o)}}function bn(n,o){let u=n._controlledReadableByteStream;if(n._closeRequested||u._state!=="readable")return;let{buffer:h,byteOffset:m,byteLength:y}=o;if(rt(h))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let b=$e(h);if(n._pendingPullIntos.length>0){let T=n._pendingPullIntos.peek();if(rt(T.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");ia(n),T.buffer=$e(T.buffer),T.readerType==="none"&&zo(n,T)}if(xo(u))if(Fc(n),hn(u)===0)yn(n,b,m,y);else{n._pendingPullIntos.length>0&&Jt(n);let T=new Uint8Array(b,m,y);Gi(u,T,!1)}else ua(u)?(yn(n,b,m,y),aa(n)):yn(n,b,m,y);St(n)}function ye(n,o){let u=n._controlledReadableByteStream;u._state==="readable"&&(Do(n),nt(n),gn(n),bs(u,o))}function jo(n,o){let u=n._queue.shift();n._queueTotalSize-=u.byteLength,Lo(n);let h=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);o._chunkSteps(h)}function oa(n){if(n._byobRequest===null&&n._pendingPullIntos.length>0){let o=n._pendingPullIntos.peek(),u=new Uint8Array(o.buffer,o.byteOffset+o.bytesFilled,o.byteLength-o.bytesFilled),h=Object.create(vt.prototype);jc(h,n,u),n._byobRequest=h}return n._byobRequest}function Uo(n){let o=n._controlledReadableByteStream._state;return o==="errored"?null:o==="closed"?0:n._strategyHWM-n._queueTotalSize}function _n(n,o){let u=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(o!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(o===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(u.bytesFilled+o>u.byteLength)throw new RangeError("bytesWritten out of range")}u.buffer=$e(u.buffer),Wo(n,o)}function vn(n,o){let u=n._pendingPullIntos.peek();if(n._controlledReadableByteStream._state==="closed"){if(o.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(o.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(u.byteOffset+u.bytesFilled!==o.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(u.bufferByteLength!==o.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(u.bytesFilled+o.byteLength>u.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let m=o.byteLength;u.buffer=$e(o.buffer),Wo(n,m)}function Vo(n,o,u,h,m,y,b){o._controlledReadableByteStream=n,o._pullAgain=!1,o._pulling=!1,o._byobRequest=null,o._queue=o._queueTotalSize=void 0,nt(o),o._closeRequested=!1,o._started=!1,o._strategyHWM=y,o._pullAlgorithm=h,o._cancelAlgorithm=m,o._autoAllocateChunkSize=b,o._pendingPullIntos=new M,n._readableStreamController=o;let T=u();_(f(T),()=>(o._started=!0,St(o),null),B=>(ye(o,B),null))}function Wc(n,o,u){let h=Object.create(Le.prototype),m,y,b;o.start!==void 0?m=()=>o.start(h):m=()=>{},o.pull!==void 0?y=()=>o.pull(h):y=()=>f(void 0),o.cancel!==void 0?b=B=>o.cancel(B):b=()=>f(void 0);let T=o.autoAllocateChunkSize;if(T===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Vo(n,h,m,y,b,u,T)}function jc(n,o,u){n._associatedReadableByteStreamController=o,n._view=u}function sa(n){return new TypeError(`ReadableStreamBYOBRequest.prototype.${n} can only be used on a ReadableStreamBYOBRequest`)}function Pr(n){return new TypeError(`ReadableByteStreamController.prototype.${n} can only be used on a ReadableByteStreamController`)}function Uc(n,o){Oe(n,o);let u=n?.mode;return{mode:u===void 0?void 0:Vc(u,`${o} has member 'mode' that`)}}function Vc(n,o){if(n=`${n}`,n!=="byob")throw new TypeError(`${o} '${n}' is not a valid enumeration value for ReadableStreamReaderMode`);return n}function Hc(n,o){var u;Oe(n,o);let h=(u=n?.min)!==null&&u!==void 0?u:1;return{min:Zi(h,`${o} has member 'min' that`)}}function Ho(n){return new it(n)}function Zo(n,o){n._reader._readIntoRequests.push(o)}function Zc(n,o,u){let m=n._reader._readIntoRequests.shift();u?m._closeSteps(o):m._chunkSteps(o)}function Yo(n){return n._reader._readIntoRequests.length}function ua(n){let o=n._reader;return!(o===void 0||!xt(o))}class it{constructor(o){if(Me(o,1,"ReadableStreamBYOBReader"),Yi(o,"First parameter"),st(o))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!wt(o._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");yo(this,o),this._readIntoRequests=new M}get closed(){return xt(this)?this._closedPromise:p(wn("closed"))}cancel(o=void 0){return xt(this)?this._ownerReadableStream===void 0?p(dn("cancel")):Wi(this,o):p(wn("cancel"))}read(o,u={}){if(!xt(this))return p(wn("read"));if(!ArrayBuffer.isView(o))return p(new TypeError("view must be an array buffer view"));if(o.byteLength===0)return p(new TypeError("view must have non-zero byteLength"));if(o.buffer.byteLength===0)return p(new TypeError("view's buffer must have non-zero byteLength"));if(rt(o.buffer))return p(new TypeError("view's buffer has been detached"));let h;try{h=Hc(u,"options")}catch(k){return p(k)}let m=h.min;if(m===0)return p(new TypeError("options.min must be greater than 0"));if(Dc(o)){if(m>o.byteLength)return p(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(m>o.length)return p(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return p(dn("read from"));let y,b,T=d((k,D)=>{y=k,b=D});return Go(this,o,m,{_chunkSteps:k=>y({value:k,done:!1}),_closeSteps:k=>y({value:k,done:!0}),_errorSteps:k=>b(k)}),T}releaseLock(){if(!xt(this))throw wn("releaseLock");this._ownerReadableStream!==void 0&&Yc(this)}}Object.defineProperties(it.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),a(it.prototype.cancel,"cancel"),a(it.prototype.read,"read"),a(it.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(it.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function xt(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readIntoRequests")?!1:n instanceof it}function Go(n,o,u,h){let m=n._ownerReadableStream;m._disturbed=!0,m._state==="errored"?h._errorSteps(m._storedError):zc(m._readableStreamController,o,u,h)}function Yc(n){ze(n);let o=new TypeError("Reader was released");Qo(n,o)}function Qo(n,o){let u=n._readIntoRequests;n._readIntoRequests=new M,u.forEach(h=>{h._errorSteps(o)})}function wn(n){return new TypeError(`ReadableStreamBYOBReader.prototype.${n} can only be used on a ReadableStreamBYOBReader`)}function Or(n,o){let{highWaterMark:u}=n;if(u===void 0)return o;if(Ao(u)||u<0)throw new RangeError("Invalid highWaterMark");return u}function Sn(n){let{size:o}=n;return o||(()=>1)}function xn(n,o){Oe(n,o);let u=n?.highWaterMark,h=n?.size;return{highWaterMark:u===void 0?void 0:Hi(u),size:h===void 0?void 0:Gc(h,`${o} has member 'size' that`)}}function Gc(n,o){return me(n,o),u=>Hi(n(u))}function Qc(n,o){Oe(n,o);let u=n?.abort,h=n?.close,m=n?.start,y=n?.type,b=n?.write;return{abort:u===void 0?void 0:Xc(u,n,`${o} has member 'abort' that`),close:h===void 0?void 0:Kc(h,n,`${o} has member 'close' that`),start:m===void 0?void 0:Jc(m,n,`${o} has member 'start' that`),write:b===void 0?void 0:ef(b,n,`${o} has member 'write' that`),type:y}}function Xc(n,o,u){return me(n,u),h=>U(n,o,[h])}function Kc(n,o,u){return me(n,u),()=>U(n,o,[])}function Jc(n,o,u){return me(n,u),h=>W(n,o,[h])}function ef(n,o,u){return me(n,u),(h,m)=>U(n,o,[h,m])}function Xo(n,o){if(!er(n))throw new TypeError(`${o} is not a WritableStream.`)}function tf(n){if(typeof n!="object"||n===null)return!1;try{return typeof n.aborted=="boolean"}catch{return!1}}let rf=typeof AbortController=="function";function nf(){if(rf)return new AbortController}class at{constructor(o={},u={}){o===void 0?o=null:vo(o,"First parameter");let h=xn(u,"Second parameter"),m=Qc(o,"First parameter");if(Jo(this),m.type!==void 0)throw new RangeError("Invalid type is specified");let b=Sn(h),T=Or(h,1);bf(this,m,T,b)}get locked(){if(!er(this))throw kn("locked");return tr(this)}abort(o=void 0){return er(this)?tr(this)?p(new TypeError("Cannot abort a stream that already has a writer")):Tn(this,o):p(kn("abort"))}close(){return er(this)?tr(this)?p(new TypeError("Cannot close a stream that already has a writer")):Ie(this)?p(new TypeError("Cannot close an already-closing stream")):es(this):p(kn("close"))}getWriter(){if(!er(this))throw kn("getWriter");return Ko(this)}}Object.defineProperties(at.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),a(at.prototype.abort,"abort"),a(at.prototype.close,"close"),a(at.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(at.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Ko(n){return new We(n)}function af(n,o,u,h,m=1,y=()=>1){let b=Object.create(at.prototype);Jo(b);let T=Object.create(rr.prototype);return os(b,T,n,o,u,h,m,y),b}function Jo(n){n._state="writable",n._storedError=void 0,n._writer=void 0,n._writableStreamController=void 0,n._writeRequests=new M,n._inFlightWriteRequest=void 0,n._closeRequest=void 0,n._inFlightCloseRequest=void 0,n._pendingAbortRequest=void 0,n._backpressure=!1}function er(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_writableStreamController")?!1:n instanceof at}function tr(n){return n._writer!==void 0}function Tn(n,o){var u;if(n._state==="closed"||n._state==="errored")return f(void 0);n._writableStreamController._abortReason=o,(u=n._writableStreamController._abortController)===null||u===void 0||u.abort(o);let h=n._state;if(h==="closed"||h==="errored")return f(void 0);if(n._pendingAbortRequest!==void 0)return n._pendingAbortRequest._promise;let m=!1;h==="erroring"&&(m=!0,o=void 0);let y=d((b,T)=>{n._pendingAbortRequest={_promise:void 0,_resolve:b,_reject:T,_reason:o,_wasAlreadyErroring:m}});return n._pendingAbortRequest._promise=y,m||ca(n,o),y}function es(n){let o=n._state;if(o==="closed"||o==="errored")return p(new TypeError(`The stream (in ${o} state) is not in the writable state and cannot be closed`));let u=d((m,y)=>{let b={_resolve:m,_reject:y};n._closeRequest=b}),h=n._writer;return h!==void 0&&n._backpressure&&o==="writable"&&ba(h),_f(n._writableStreamController),u}function of(n){return d((u,h)=>{let m={_resolve:u,_reject:h};n._writeRequests.push(m)})}function la(n,o){if(n._state==="writable"){ca(n,o);return}fa(n)}function ca(n,o){let u=n._writableStreamController;n._state="erroring",n._storedError=o;let h=n._writer;h!==void 0&&rs(h,o),!ff(n)&&u._started&&fa(n)}function fa(n){n._state="errored",n._writableStreamController[ce]();let o=n._storedError;if(n._writeRequests.forEach(m=>{m._reject(o)}),n._writeRequests=new M,n._pendingAbortRequest===void 0){Rn(n);return}let u=n._pendingAbortRequest;if(n._pendingAbortRequest=void 0,u._wasAlreadyErroring){u._reject(o),Rn(n);return}let h=n._writableStreamController[V](u._reason);_(h,()=>(u._resolve(),Rn(n),null),m=>(u._reject(m),Rn(n),null))}function sf(n){n._inFlightWriteRequest._resolve(void 0),n._inFlightWriteRequest=void 0}function uf(n,o){n._inFlightWriteRequest._reject(o),n._inFlightWriteRequest=void 0,la(n,o)}function lf(n){n._inFlightCloseRequest._resolve(void 0),n._inFlightCloseRequest=void 0,n._state==="erroring"&&(n._storedError=void 0,n._pendingAbortRequest!==void 0&&(n._pendingAbortRequest._resolve(),n._pendingAbortRequest=void 0)),n._state="closed";let u=n._writer;u!==void 0&&cs(u)}function cf(n,o){n._inFlightCloseRequest._reject(o),n._inFlightCloseRequest=void 0,n._pendingAbortRequest!==void 0&&(n._pendingAbortRequest._reject(o),n._pendingAbortRequest=void 0),la(n,o)}function Ie(n){return!(n._closeRequest===void 0&&n._inFlightCloseRequest===void 0)}function ff(n){return!(n._inFlightWriteRequest===void 0&&n._inFlightCloseRequest===void 0)}function df(n){n._inFlightCloseRequest=n._closeRequest,n._closeRequest=void 0}function hf(n){n._inFlightWriteRequest=n._writeRequests.shift()}function Rn(n){n._closeRequest!==void 0&&(n._closeRequest._reject(n._storedError),n._closeRequest=void 0);let o=n._writer;o!==void 0&&ya(o,n._storedError)}function da(n,o){let u=n._writer;u!==void 0&&o!==n._backpressure&&(o?Cf(u):ba(u)),n._backpressure=o}class We{constructor(o){if(Me(o,1,"WritableStreamDefaultWriter"),Xo(o,"First parameter"),tr(o))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=o,o._writer=this;let u=o._state;if(u==="writable")!Ie(o)&&o._backpressure?Pn(this):fs(this),An(this);else if(u==="erroring")ga(this,o._storedError),An(this);else if(u==="closed")fs(this),Tf(this);else{let h=o._storedError;ga(this,h),ls(this,h)}}get closed(){return Tt(this)?this._closedPromise:p(Rt("closed"))}get desiredSize(){if(!Tt(this))throw Rt("desiredSize");if(this._ownerWritableStream===void 0)throw Br("desiredSize");return gf(this)}get ready(){return Tt(this)?this._readyPromise:p(Rt("ready"))}abort(o=void 0){return Tt(this)?this._ownerWritableStream===void 0?p(Br("abort")):pf(this,o):p(Rt("abort"))}close(){if(!Tt(this))return p(Rt("close"));let o=this._ownerWritableStream;return o===void 0?p(Br("close")):Ie(o)?p(new TypeError("Cannot close an already-closing stream")):ts(this)}releaseLock(){if(!Tt(this))throw Rt("releaseLock");this._ownerWritableStream!==void 0&&ns(this)}write(o=void 0){return Tt(this)?this._ownerWritableStream===void 0?p(Br("write to")):is(this,o):p(Rt("write"))}}Object.defineProperties(We.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),a(We.prototype.abort,"abort"),a(We.prototype.close,"close"),a(We.prototype.releaseLock,"releaseLock"),a(We.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(We.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Tt(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_ownerWritableStream")?!1:n instanceof We}function pf(n,o){let u=n._ownerWritableStream;return Tn(u,o)}function ts(n){let o=n._ownerWritableStream;return es(o)}function mf(n){let o=n._ownerWritableStream,u=o._state;return Ie(o)||u==="closed"?f(void 0):u==="errored"?p(o._storedError):ts(n)}function yf(n,o){n._closedPromiseState==="pending"?ya(n,o):Rf(n,o)}function rs(n,o){n._readyPromiseState==="pending"?ds(n,o):Ef(n,o)}function gf(n){let o=n._ownerWritableStream,u=o._state;return u==="errored"||u==="erroring"?null:u==="closed"?0:ss(o._writableStreamController)}function ns(n){let o=n._ownerWritableStream,u=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");rs(n,u),yf(n,u),o._writer=void 0,n._ownerWritableStream=void 0}function is(n,o){let u=n._ownerWritableStream,h=u._writableStreamController,m=vf(h,o);if(u!==n._ownerWritableStream)return p(Br("write to"));let y=u._state;if(y==="errored")return p(u._storedError);if(Ie(u)||y==="closed")return p(new TypeError("The stream is closing or closed and cannot be written to"));if(y==="erroring")return p(u._storedError);let b=of(u);return wf(h,o,m),b}let as={};class rr{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!ha(this))throw ma("abortReason");return this._abortReason}get signal(){if(!ha(this))throw ma("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(o=void 0){if(!ha(this))throw ma("error");this._controlledWritableStream._state==="writable"&&us(this,o)}[V](o){let u=this._abortAlgorithm(o);return Cn(this),u}[ce](){nt(this)}}Object.defineProperties(rr.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(rr.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function ha(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledWritableStream")?!1:n instanceof rr}function os(n,o,u,h,m,y,b,T){o._controlledWritableStream=n,n._writableStreamController=o,o._queue=void 0,o._queueTotalSize=void 0,nt(o),o._abortReason=void 0,o._abortController=nf(),o._started=!1,o._strategySizeAlgorithm=T,o._strategyHWM=b,o._writeAlgorithm=h,o._closeAlgorithm=m,o._abortAlgorithm=y;let B=pa(o);da(n,B);let k=u(),D=f(k);_(D,()=>(o._started=!0,En(o),null),z=>(o._started=!0,la(n,z),null))}function bf(n,o,u,h){let m=Object.create(rr.prototype),y,b,T,B;o.start!==void 0?y=()=>o.start(m):y=()=>{},o.write!==void 0?b=k=>o.write(k,m):b=()=>f(void 0),o.close!==void 0?T=()=>o.close():T=()=>f(void 0),o.abort!==void 0?B=k=>o.abort(k):B=()=>f(void 0),os(n,m,y,b,T,B,u,h)}function Cn(n){n._writeAlgorithm=void 0,n._closeAlgorithm=void 0,n._abortAlgorithm=void 0,n._strategySizeAlgorithm=void 0}function _f(n){ta(n,as,0),En(n)}function vf(n,o){try{return n._strategySizeAlgorithm(o)}catch(u){return Ir(n,u),1}}function ss(n){return n._strategyHWM-n._queueTotalSize}function wf(n,o,u){try{ta(n,o,u)}catch(m){Ir(n,m);return}let h=n._controlledWritableStream;if(!Ie(h)&&h._state==="writable"){let m=pa(n);da(h,m)}En(n)}function En(n){let o=n._controlledWritableStream;if(!n._started||o._inFlightWriteRequest!==void 0)return;if(o._state==="erroring"){fa(o);return}if(n._queue.length===0)return;let h=Nc(n);h===as?Sf(n):xf(n,h)}function Ir(n,o){n._controlledWritableStream._state==="writable"&&us(n,o)}function Sf(n){let o=n._controlledWritableStream;df(o),ea(n);let u=n._closeAlgorithm();Cn(n),_(u,()=>(lf(o),null),h=>(cf(o,h),null))}function xf(n,o){let u=n._controlledWritableStream;hf(u);let h=n._writeAlgorithm(o);_(h,()=>{sf(u);let m=u._state;if(ea(n),!Ie(u)&&m==="writable"){let y=pa(n);da(u,y)}return En(n),null},m=>(u._state==="writable"&&Cn(n),uf(u,m),null))}function pa(n){return ss(n)<=0}function us(n,o){let u=n._controlledWritableStream;Cn(n),ca(u,o)}function kn(n){return new TypeError(`WritableStream.prototype.${n} can only be used on a WritableStream`)}function ma(n){return new TypeError(`WritableStreamDefaultController.prototype.${n} can only be used on a WritableStreamDefaultController`)}function Rt(n){return new TypeError(`WritableStreamDefaultWriter.prototype.${n} can only be used on a WritableStreamDefaultWriter`)}function Br(n){return new TypeError("Cannot "+n+" a stream using a released writer")}function An(n){n._closedPromise=d((o,u)=>{n._closedPromise_resolve=o,n._closedPromise_reject=u,n._closedPromiseState="pending"})}function ls(n,o){An(n),ya(n,o)}function Tf(n){An(n),cs(n)}function ya(n,o){n._closedPromise_reject!==void 0&&(P(n._closedPromise),n._closedPromise_reject(o),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0,n._closedPromiseState="rejected")}function Rf(n,o){ls(n,o)}function cs(n){n._closedPromise_resolve!==void 0&&(n._closedPromise_resolve(void 0),n._closedPromise_resolve=void 0,n._closedPromise_reject=void 0,n._closedPromiseState="resolved")}function Pn(n){n._readyPromise=d((o,u)=>{n._readyPromise_resolve=o,n._readyPromise_reject=u}),n._readyPromiseState="pending"}function ga(n,o){Pn(n),ds(n,o)}function fs(n){Pn(n),ba(n)}function ds(n,o){n._readyPromise_reject!==void 0&&(P(n._readyPromise),n._readyPromise_reject(o),n._readyPromise_resolve=void 0,n._readyPromise_reject=void 0,n._readyPromiseState="rejected")}function Cf(n){Pn(n)}function Ef(n,o){ga(n,o)}function ba(n){n._readyPromise_resolve!==void 0&&(n._readyPromise_resolve(void 0),n._readyPromise_resolve=void 0,n._readyPromise_reject=void 0,n._readyPromiseState="fulfilled")}function kf(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let _a=kf();function Af(n){if(!(typeof n=="function"||typeof n=="object")||n.name!=="DOMException")return!1;try{return new n,!0}catch{return!1}}function Pf(){let n=_a?.DOMException;return Af(n)?n:void 0}function Of(){let n=function(u,h){this.message=u||"",this.name=h||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return a(n,"DOMException"),n.prototype=Object.create(Error.prototype),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,configurable:!0}),n}let If=Pf()||Of();function hs(n,o,u,h,m,y){let b=Kt(n),T=Ko(o);n._disturbed=!0;let B=!1,k=f(void 0);return d((D,z)=>{let H;if(y!==void 0){if(H=()=>{let A=y.reason!==void 0?y.reason:new If("Aborted","AbortError"),L=[];h||L.push(()=>o._state==="writable"?Tn(o,A):f(void 0)),m||L.push(()=>n._state==="readable"?Ce(n,A):f(void 0)),ie(()=>Promise.all(L.map(Z=>Z())),!0,A)},y.aborted){H();return}y.addEventListener("abort",H)}function Ee(){return d((A,L)=>{function Z(fe){fe?A():g(or(),Z,L)}Z(!1)})}function or(){return B?f(!0):g(T._readyPromise,()=>d((A,L)=>{Er(b,{_chunkSteps:Z=>{k=g(is(T,Z),void 0,e),A(!1)},_closeSteps:()=>A(!0),_errorSteps:L})}))}if(Ue(n,b._closedPromise,A=>(h?ge(!0,A):ie(()=>Tn(o,A),!0,A),null)),Ue(o,T._closedPromise,A=>(m?ge(!0,A):ie(()=>Ce(n,A),!0,A),null)),te(n,b._closedPromise,()=>(u?ge():ie(()=>mf(T)),null)),Ie(o)||o._state==="closed"){let A=new TypeError("the destination writable stream closed before all data could be piped to it");m?ge(!0,A):ie(()=>Ce(n,A),!0,A)}P(Ee());function lt(){let A=k;return g(k,()=>A!==k?lt():void 0)}function Ue(A,L,Z){A._state==="errored"?Z(A._storedError):v(L,Z)}function te(A,L,Z){A._state==="closed"?Z():S(L,Z)}function ie(A,L,Z){if(B)return;B=!0,o._state==="writable"&&!Ie(o)?S(lt(),fe):fe();function fe(){return _(A(),()=>Ve(L,Z),sr=>Ve(!0,sr)),null}}function ge(A,L){B||(B=!0,o._state==="writable"&&!Ie(o)?S(lt(),()=>Ve(A,L)):Ve(A,L))}function Ve(A,L){return ns(T),ze(b),y!==void 0&&y.removeEventListener("abort",H),A?z(L):D(void 0),null}})}class je{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!On(this))throw Bn("desiredSize");return va(this)}close(){if(!On(this))throw Bn("close");if(!ir(this))throw new TypeError("The stream is not in a state that permits close");Ct(this)}enqueue(o=void 0){if(!On(this))throw Bn("enqueue");if(!ir(this))throw new TypeError("The stream is not in a state that permits enqueue");return nr(this,o)}error(o=void 0){if(!On(this))throw Bn("error");Re(this,o)}[Te](o){nt(this);let u=this._cancelAlgorithm(o);return In(this),u}[$i](o){let u=this._controlledReadableStream;if(this._queue.length>0){let h=ea(this);this._closeRequested&&this._queue.length===0?(In(this),qr(u)):Nr(this),o._chunkSteps(h)}else So(u,o),Nr(this)}[Li](){}}Object.defineProperties(je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),a(je.prototype.close,"close"),a(je.prototype.enqueue,"enqueue"),a(je.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(je.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function On(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledReadableStream")?!1:n instanceof je}function Nr(n){if(!ps(n))return;if(n._pulling){n._pullAgain=!0;return}n._pulling=!0;let u=n._pullAlgorithm();_(u,()=>(n._pulling=!1,n._pullAgain&&(n._pullAgain=!1,Nr(n)),null),h=>(Re(n,h),null))}function ps(n){let o=n._controlledReadableStream;return!ir(n)||!n._started?!1:!!(st(o)&&hn(o)>0||va(n)>0)}function In(n){n._pullAlgorithm=void 0,n._cancelAlgorithm=void 0,n._strategySizeAlgorithm=void 0}function Ct(n){if(!ir(n))return;let o=n._controlledReadableStream;n._closeRequested=!0,n._queue.length===0&&(In(n),qr(o))}function nr(n,o){if(!ir(n))return;let u=n._controlledReadableStream;if(st(u)&&hn(u)>0)Gi(u,o,!1);else{let h;try{h=n._strategySizeAlgorithm(o)}catch(m){throw Re(n,m),m}try{ta(n,o,h)}catch(m){throw Re(n,m),m}}Nr(n)}function Re(n,o){let u=n._controlledReadableStream;u._state==="readable"&&(nt(n),In(n),bs(u,o))}function va(n){let o=n._controlledReadableStream._state;return o==="errored"?null:o==="closed"?0:n._strategyHWM-n._queueTotalSize}function Bf(n){return!ps(n)}function ir(n){let o=n._controlledReadableStream._state;return!n._closeRequested&&o==="readable"}function ms(n,o,u,h,m,y,b){o._controlledReadableStream=n,o._queue=void 0,o._queueTotalSize=void 0,nt(o),o._started=!1,o._closeRequested=!1,o._pullAgain=!1,o._pulling=!1,o._strategySizeAlgorithm=b,o._strategyHWM=y,o._pullAlgorithm=h,o._cancelAlgorithm=m,n._readableStreamController=o;let T=u();_(f(T),()=>(o._started=!0,Nr(o),null),B=>(Re(o,B),null))}function Nf(n,o,u,h){let m=Object.create(je.prototype),y,b,T;o.start!==void 0?y=()=>o.start(m):y=()=>{},o.pull!==void 0?b=()=>o.pull(m):b=()=>f(void 0),o.cancel!==void 0?T=B=>o.cancel(B):T=()=>f(void 0),ms(n,m,y,b,T,u,h)}function Bn(n){return new TypeError(`ReadableStreamDefaultController.prototype.${n} can only be used on a ReadableStreamDefaultController`)}function Df(n,o){return wt(n._readableStreamController)?Ff(n):qf(n)}function qf(n,o){let u=Kt(n),h=!1,m=!1,y=!1,b=!1,T,B,k,D,z,H=d(te=>{z=te});function Ee(){return h?(m=!0,f(void 0)):(h=!0,Er(u,{_chunkSteps:ie=>{N(()=>{m=!1;let ge=ie,Ve=ie;y||nr(k._readableStreamController,ge),b||nr(D._readableStreamController,Ve),h=!1,m&&Ee()})},_closeSteps:()=>{h=!1,y||Ct(k._readableStreamController),b||Ct(D._readableStreamController),(!y||!b)&&z(void 0)},_errorSteps:()=>{h=!1}}),f(void 0))}function or(te){if(y=!0,T=te,b){let ie=kr([T,B]),ge=Ce(n,ie);z(ge)}return H}function lt(te){if(b=!0,B=te,y){let ie=kr([T,B]),ge=Ce(n,ie);z(ge)}return H}function Ue(){}return k=Dr(Ue,Ee,or),D=Dr(Ue,Ee,lt),v(u._closedPromise,te=>(Re(k._readableStreamController,te),Re(D._readableStreamController,te),(!y||!b)&&z(void 0),null)),[k,D]}function Ff(n){let o=Kt(n),u=!1,h=!1,m=!1,y=!1,b=!1,T,B,k,D,z,H=d(A=>{z=A});function Ee(A){v(A._closedPromise,L=>(A!==o||(ye(k._readableStreamController,L),ye(D._readableStreamController,L),(!y||!b)&&z(void 0)),null))}function or(){xt(o)&&(ze(o),o=Kt(n),Ee(o)),Er(o,{_chunkSteps:L=>{N(()=>{h=!1,m=!1;let Z=L,fe=L;if(!y&&!b)try{fe=Bo(L)}catch(sr){ye(k._readableStreamController,sr),ye(D._readableStreamController,sr),z(Ce(n,sr));return}y||bn(k._readableStreamController,Z),b||bn(D._readableStreamController,fe),u=!1,h?Ue():m&&te()})},_closeSteps:()=>{u=!1,y||Ar(k._readableStreamController),b||Ar(D._readableStreamController),k._readableStreamController._pendingPullIntos.length>0&&_n(k._readableStreamController,0),D._readableStreamController._pendingPullIntos.length>0&&_n(D._readableStreamController,0),(!y||!b)&&z(void 0)},_errorSteps:()=>{u=!1}})}function lt(A,L){tt(o)&&(ze(o),o=Ho(n),Ee(o));let Z=L?D:k,fe=L?k:D;Go(o,A,1,{_chunkSteps:ur=>{N(()=>{h=!1,m=!1;let lr=L?b:y;if(L?y:b)lr||vn(Z._readableStreamController,ur);else{let Os;try{Os=Bo(ur)}catch(Ra){ye(Z._readableStreamController,Ra),ye(fe._readableStreamController,Ra),z(Ce(n,Ra));return}lr||vn(Z._readableStreamController,ur),bn(fe._readableStreamController,Os)}u=!1,h?Ue():m&&te()})},_closeSteps:ur=>{u=!1;let lr=L?b:y,Ln=L?y:b;lr||Ar(Z._readableStreamController),Ln||Ar(fe._readableStreamController),ur!==void 0&&(lr||vn(Z._readableStreamController,ur),!Ln&&fe._readableStreamController._pendingPullIntos.length>0&&_n(fe._readableStreamController,0)),(!lr||!Ln)&&z(void 0)},_errorSteps:()=>{u=!1}})}function Ue(){if(u)return h=!0,f(void 0);u=!0;let A=oa(k._readableStreamController);return A===null?or():lt(A._view,!1),f(void 0)}function te(){if(u)return m=!0,f(void 0);u=!0;let A=oa(D._readableStreamController);return A===null?or():lt(A._view,!0),f(void 0)}function ie(A){if(y=!0,T=A,b){let L=kr([T,B]),Z=Ce(n,L);z(Z)}return H}function ge(A){if(b=!0,B=A,y){let L=kr([T,B]),Z=Ce(n,L);z(Z)}return H}function Ve(){}return k=gs(Ve,Ue,ie),D=gs(Ve,te,ge),Ee(o),[k,D]}function zf(n){return r(n)&&typeof n.getReader<"u"}function Mf(n){return zf(n)?Lf(n.getReader()):$f(n)}function $f(n){let o,u=Io(n,"async"),h=e;function m(){let b;try{b=Pc(u)}catch(B){return p(B)}let T=f(b);return C(T,B=>{if(!r(B))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Oc(B))Ct(o._readableStreamController);else{let D=Ic(B);nr(o._readableStreamController,D)}})}function y(b){let T=u.iterator,B;try{B=mn(T,"return")}catch(z){return p(z)}if(B===void 0)return f(void 0);let k;try{k=W(B,T,[b])}catch(z){return p(z)}let D=f(k);return C(D,z=>{if(!r(z))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return o=Dr(h,m,y,0),o}function Lf(n){let o,u=e;function h(){let y;try{y=n.read()}catch(b){return p(b)}return C(y,b=>{if(!r(b))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(b.done)Ct(o._readableStreamController);else{let T=b.value;nr(o._readableStreamController,T)}})}function m(y){try{return f(n.cancel(y))}catch(b){return p(b)}}return o=Dr(u,h,m,0),o}function Wf(n,o){Oe(n,o);let u=n,h=u?.autoAllocateChunkSize,m=u?.cancel,y=u?.pull,b=u?.start,T=u?.type;return{autoAllocateChunkSize:h===void 0?void 0:Zi(h,`${o} has member 'autoAllocateChunkSize' that`),cancel:m===void 0?void 0:jf(m,u,`${o} has member 'cancel' that`),pull:y===void 0?void 0:Uf(y,u,`${o} has member 'pull' that`),start:b===void 0?void 0:Vf(b,u,`${o} has member 'start' that`),type:T===void 0?void 0:Hf(T,`${o} has member 'type' that`)}}function jf(n,o,u){return me(n,u),h=>U(n,o,[h])}function Uf(n,o,u){return me(n,u),h=>U(n,o,[h])}function Vf(n,o,u){return me(n,u),h=>W(n,o,[h])}function Hf(n,o){if(n=`${n}`,n!=="bytes")throw new TypeError(`${o} '${n}' is not a valid enumeration value for ReadableStreamType`);return n}function Zf(n,o){return Oe(n,o),{preventCancel:!!n?.preventCancel}}function ys(n,o){Oe(n,o);let u=n?.preventAbort,h=n?.preventCancel,m=n?.preventClose,y=n?.signal;return y!==void 0&&Yf(y,`${o} has member 'signal' that`),{preventAbort:!!u,preventCancel:!!h,preventClose:!!m,signal:y}}function Yf(n,o){if(!tf(n))throw new TypeError(`${o} is not an AbortSignal.`)}function Gf(n,o){Oe(n,o);let u=n?.readable;Vi(u,"readable","ReadableWritablePair"),Yi(u,`${o} has member 'readable' that`);let h=n?.writable;return Vi(h,"writable","ReadableWritablePair"),Xo(h,`${o} has member 'writable' that`),{readable:u,writable:h}}class J{constructor(o={},u={}){o===void 0?o=null:vo(o,"First parameter");let h=xn(u,"Second parameter"),m=Wf(o,"First parameter");if(wa(this),m.type==="bytes"){if(h.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let y=Or(h,0);Wc(this,m,y)}else{let y=Sn(h),b=Or(h,1);Nf(this,m,b,y)}}get locked(){if(!ot(this))throw Et("locked");return st(this)}cancel(o=void 0){return ot(this)?st(this)?p(new TypeError("Cannot cancel a stream that already has a reader")):Ce(this,o):p(Et("cancel"))}getReader(o=void 0){if(!ot(this))throw Et("getReader");return Uc(o,"First parameter").mode===void 0?Kt(this):Ho(this)}pipeThrough(o,u={}){if(!ot(this))throw Et("pipeThrough");Me(o,1,"pipeThrough");let h=Gf(o,"First parameter"),m=ys(u,"Second parameter");if(st(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(tr(h.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let y=hs(this,h.writable,m.preventClose,m.preventAbort,m.preventCancel,m.signal);return P(y),h.readable}pipeTo(o,u={}){if(!ot(this))return p(Et("pipeTo"));if(o===void 0)return p("Parameter 1 is required in 'pipeTo'.");if(!er(o))return p(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let h;try{h=ys(u,"Second parameter")}catch(m){return p(m)}return st(this)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):tr(o)?p(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):hs(this,o,h.preventClose,h.preventAbort,h.preventCancel,h.signal)}tee(){if(!ot(this))throw Et("tee");let o=Df(this);return kr(o)}values(o=void 0){if(!ot(this))throw Et("values");let u=Zf(o,"First parameter");return kc(this,u.preventCancel)}[Ji](o){return this.values(o)}static from(o){return Mf(o)}}Object.defineProperties(J,{from:{enumerable:!0}}),Object.defineProperties(J.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),a(J.from,"from"),a(J.prototype.cancel,"cancel"),a(J.prototype.getReader,"getReader"),a(J.prototype.pipeThrough,"pipeThrough"),a(J.prototype.pipeTo,"pipeTo"),a(J.prototype.tee,"tee"),a(J.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(J.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(J.prototype,Ji,{value:J.prototype.values,writable:!0,configurable:!0});function Dr(n,o,u,h=1,m=()=>1){let y=Object.create(J.prototype);wa(y);let b=Object.create(je.prototype);return ms(y,b,n,o,u,h,m),y}function gs(n,o,u){let h=Object.create(J.prototype);wa(h);let m=Object.create(Le.prototype);return Vo(h,m,n,o,u,0,void 0),h}function wa(n){n._state="readable",n._reader=void 0,n._storedError=void 0,n._disturbed=!1}function ot(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_readableStreamController")?!1:n instanceof J}function st(n){return n._reader!==void 0}function Ce(n,o){if(n._disturbed=!0,n._state==="closed")return f(void 0);if(n._state==="errored")return p(n._storedError);qr(n);let u=n._reader;if(u!==void 0&&xt(u)){let m=u._readIntoRequests;u._readIntoRequests=new M,m.forEach(y=>{y._closeSteps(void 0)})}let h=n._readableStreamController[Te](o);return C(h,e)}function qr(n){n._state="closed";let o=n._reader;if(o!==void 0&&(bo(o),tt(o))){let u=o._readRequests;o._readRequests=new M,u.forEach(h=>{h._closeSteps()})}}function bs(n,o){n._state="errored",n._storedError=o;let u=n._reader;u!==void 0&&(Ui(u,o),tt(u)?To(u,o):Qo(u,o))}function Et(n){return new TypeError(`ReadableStream.prototype.${n} can only be used on a ReadableStream`)}function _s(n,o){Oe(n,o);let u=n?.highWaterMark;return Vi(u,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Hi(u)}}let vs=n=>n.byteLength;a(vs,"size");class Nn{constructor(o){Me(o,1,"ByteLengthQueuingStrategy"),o=_s(o,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=o.highWaterMark}get highWaterMark(){if(!Ss(this))throw ws("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ss(this))throw ws("size");return vs}}Object.defineProperties(Nn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Nn.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ws(n){return new TypeError(`ByteLengthQueuingStrategy.prototype.${n} can only be used on a ByteLengthQueuingStrategy`)}function Ss(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_byteLengthQueuingStrategyHighWaterMark")?!1:n instanceof Nn}let xs=()=>1;a(xs,"size");class Dn{constructor(o){Me(o,1,"CountQueuingStrategy"),o=_s(o,"First parameter"),this._countQueuingStrategyHighWaterMark=o.highWaterMark}get highWaterMark(){if(!Rs(this))throw Ts("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Rs(this))throw Ts("size");return xs}}Object.defineProperties(Dn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Dn.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ts(n){return new TypeError(`CountQueuingStrategy.prototype.${n} can only be used on a CountQueuingStrategy`)}function Rs(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_countQueuingStrategyHighWaterMark")?!1:n instanceof Dn}function Qf(n,o){Oe(n,o);let u=n?.cancel,h=n?.flush,m=n?.readableType,y=n?.start,b=n?.transform,T=n?.writableType;return{cancel:u===void 0?void 0:ed(u,n,`${o} has member 'cancel' that`),flush:h===void 0?void 0:Xf(h,n,`${o} has member 'flush' that`),readableType:m,start:y===void 0?void 0:Kf(y,n,`${o} has member 'start' that`),transform:b===void 0?void 0:Jf(b,n,`${o} has member 'transform' that`),writableType:T}}function Xf(n,o,u){return me(n,u),h=>U(n,o,[h])}function Kf(n,o,u){return me(n,u),h=>W(n,o,[h])}function Jf(n,o,u){return me(n,u),(h,m)=>U(n,o,[h,m])}function ed(n,o,u){return me(n,u),h=>U(n,o,[h])}class qn{constructor(o={},u={},h={}){o===void 0&&(o=null);let m=xn(u,"Second parameter"),y=xn(h,"Third parameter"),b=Qf(o,"First parameter");if(b.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(b.writableType!==void 0)throw new RangeError("Invalid writableType specified");let T=Or(y,0),B=Sn(y),k=Or(m,1),D=Sn(m),z,H=d(Ee=>{z=Ee});td(this,H,k,D,T,B),nd(this,b),b.start!==void 0?z(b.start(this._transformStreamController)):z(void 0)}get readable(){if(!Cs(this))throw Ps("readable");return this._readable}get writable(){if(!Cs(this))throw Ps("writable");return this._writable}}Object.defineProperties(qn.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(qn.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function td(n,o,u,h,m,y){function b(){return o}function T(H){return od(n,H)}function B(H){return sd(n,H)}function k(){return ud(n)}n._writable=af(b,T,k,B,u,h);function D(){return ld(n)}function z(H){return cd(n,H)}n._readable=Dr(b,D,z,m,y),n._backpressure=void 0,n._backpressureChangePromise=void 0,n._backpressureChangePromise_resolve=void 0,Fn(n,!0),n._transformStreamController=void 0}function Cs(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_transformStreamController")?!1:n instanceof qn}function Es(n,o){Re(n._readable._readableStreamController,o),Sa(n,o)}function Sa(n,o){Mn(n._transformStreamController),Ir(n._writable._writableStreamController,o),xa(n)}function xa(n){n._backpressure&&Fn(n,!1)}function Fn(n,o){n._backpressureChangePromise!==void 0&&n._backpressureChangePromise_resolve(),n._backpressureChangePromise=d(u=>{n._backpressureChangePromise_resolve=u}),n._backpressure=o}class ut{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!zn(this))throw $n("desiredSize");let o=this._controlledTransformStream._readable._readableStreamController;return va(o)}enqueue(o=void 0){if(!zn(this))throw $n("enqueue");ks(this,o)}error(o=void 0){if(!zn(this))throw $n("error");id(this,o)}terminate(){if(!zn(this))throw $n("terminate");ad(this)}}Object.defineProperties(ut.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),a(ut.prototype.enqueue,"enqueue"),a(ut.prototype.error,"error"),a(ut.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ut.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function zn(n){return!r(n)||!Object.prototype.hasOwnProperty.call(n,"_controlledTransformStream")?!1:n instanceof ut}function rd(n,o,u,h,m){o._controlledTransformStream=n,n._transformStreamController=o,o._transformAlgorithm=u,o._flushAlgorithm=h,o._cancelAlgorithm=m,o._finishPromise=void 0,o._finishPromise_resolve=void 0,o._finishPromise_reject=void 0}function nd(n,o){let u=Object.create(ut.prototype),h,m,y;o.transform!==void 0?h=b=>o.transform(b,u):h=b=>{try{return ks(u,b),f(void 0)}catch(T){return p(T)}},o.flush!==void 0?m=()=>o.flush(u):m=()=>f(void 0),o.cancel!==void 0?y=b=>o.cancel(b):y=()=>f(void 0),rd(n,u,h,m,y)}function Mn(n){n._transformAlgorithm=void 0,n._flushAlgorithm=void 0,n._cancelAlgorithm=void 0}function ks(n,o){let u=n._controlledTransformStream,h=u._readable._readableStreamController;if(!ir(h))throw new TypeError("Readable side is not in a state that permits enqueue");try{nr(h,o)}catch(y){throw Sa(u,y),u._readable._storedError}Bf(h)!==u._backpressure&&Fn(u,!0)}function id(n,o){Es(n._controlledTransformStream,o)}function As(n,o){let u=n._transformAlgorithm(o);return C(u,void 0,h=>{throw Es(n._controlledTransformStream,h),h})}function ad(n){let o=n._controlledTransformStream,u=o._readable._readableStreamController;Ct(u);let h=new TypeError("TransformStream terminated");Sa(o,h)}function od(n,o){let u=n._transformStreamController;if(n._backpressure){let h=n._backpressureChangePromise;return C(h,()=>{let m=n._writable;if(m._state==="erroring")throw m._storedError;return As(u,o)})}return As(u,o)}function sd(n,o){let u=n._transformStreamController;if(u._finishPromise!==void 0)return u._finishPromise;let h=n._readable;u._finishPromise=d((y,b)=>{u._finishPromise_resolve=y,u._finishPromise_reject=b});let m=u._cancelAlgorithm(o);return Mn(u),_(m,()=>(h._state==="errored"?ar(u,h._storedError):(Re(h._readableStreamController,o),Ta(u)),null),y=>(Re(h._readableStreamController,y),ar(u,y),null)),u._finishPromise}function ud(n){let o=n._transformStreamController;if(o._finishPromise!==void 0)return o._finishPromise;let u=n._readable;o._finishPromise=d((m,y)=>{o._finishPromise_resolve=m,o._finishPromise_reject=y});let h=o._flushAlgorithm();return Mn(o),_(h,()=>(u._state==="errored"?ar(o,u._storedError):(Ct(u._readableStreamController),Ta(o)),null),m=>(Re(u._readableStreamController,m),ar(o,m),null)),o._finishPromise}function ld(n){return Fn(n,!1),n._backpressureChangePromise}function cd(n,o){let u=n._transformStreamController;if(u._finishPromise!==void 0)return u._finishPromise;let h=n._writable;u._finishPromise=d((y,b)=>{u._finishPromise_resolve=y,u._finishPromise_reject=b});let m=u._cancelAlgorithm(o);return Mn(u),_(m,()=>(h._state==="errored"?ar(u,h._storedError):(Ir(h._writableStreamController,o),xa(n),Ta(u)),null),y=>(Ir(h._writableStreamController,y),xa(n),ar(u,y),null)),u._finishPromise}function $n(n){return new TypeError(`TransformStreamDefaultController.prototype.${n} can only be used on a TransformStreamDefaultController`)}function Ta(n){n._finishPromise_resolve!==void 0&&(n._finishPromise_resolve(),n._finishPromise_resolve=void 0,n._finishPromise_reject=void 0)}function ar(n,o){n._finishPromise_reject!==void 0&&(P(n._finishPromise),n._finishPromise_reject(o),n._finishPromise_resolve=void 0,n._finishPromise_reject=void 0)}function Ps(n){return new TypeError(`TransformStream.prototype.${n} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Nn,t.CountQueuingStrategy=Dn,t.ReadableByteStreamController=Le,t.ReadableStream=J,t.ReadableStreamBYOBReader=it,t.ReadableStreamBYOBRequest=vt,t.ReadableStreamDefaultController=je,t.ReadableStreamDefaultReader=et,t.TransformStream=qn,t.TransformStreamDefaultController=ut,t.WritableStream=at,t.WritableStreamDefaultController=rr,t.WritableStreamDefaultWriter=We})});var qs=Ea(()=>{if(!globalThis.ReadableStream)try{let t=Wn("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,Wn("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,Ds())}try{let{Blob:t}=Wn("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(s){let c=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=c.byteLength,s.enqueue(new Uint8Array(c)),i===a.size&&s.close()}})})}catch{}});async function*ka(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let i=r.byteOffset,a=r.byteOffset+r.byteLength;for(;i!==a;){let s=Math.min(a-i,Fs),l=r.buffer.slice(i,i+s);i+=l.byteLength,yield new Uint8Array(l)}}else yield r;else{let i=0,a=r;for(;i!==a.size;){let l=await a.slice(i,Math.min(a.size,i+Fs)).arrayBuffer();i+=l.byteLength,yield new Uint8Array(l)}}}var Ry,Fs,zs,_d,He,zr=Fr(()=>{Ry=Is(qs(),1);Fs=65536;zs=class Aa{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let i=new TextEncoder;for(let s of e){let l;ArrayBuffer.isView(s)?l=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?l=new Uint8Array(s.slice(0)):s instanceof Aa?l=s:l=i.encode(`${s}`),this.#r+=ArrayBuffer.isView(l)?l.byteLength:l.size,this.#e.push(l)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let a=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let i of ka(this.#e,!1))r+=e.decode(i,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let i of ka(this.#e,!1))e.set(i,r),r+=i.length;return e.buffer}stream(){let e=ka(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let i=await e.next();i.done?r.close():r.enqueue(i.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,i=""){let{size:a}=this,s=e<0?Math.max(a+e,0):Math.min(e,a),l=r<0?Math.max(a+r,0):Math.min(r,a),c=Math.max(l-s,0),d=this.#e,f=[],p=0;for(let _ of d){if(p>=c)break;let S=ArrayBuffer.isView(_)?_.byteLength:_.size;if(s&&S<=s)s-=S,l-=S;else{let v;ArrayBuffer.isView(_)?(v=_.subarray(s,Math.min(S,l)),p+=v.byteLength):(v=_.slice(s,Math.min(S,l)),p+=v.size),l-=S,f.push(v),s=0}}let g=new Aa([],{type:String(i).toLowerCase()});return g.#r=c,g.#e=f,g}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(zs.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});_d=zs,He=_d});var vd,wd,cr,Pa=Fr(()=>{zr();vd=class extends He{#e=0;#t="";constructor(e,r,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof He&&/^(File)$/.test(e[Symbol.toStringTag])}},wd=vd,cr=wd});function Ls(t,e=He){var r=`${Ms()}${Ms()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,l)=>typeof s=="string"?i.push(a+Oa(l)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+Oa(l)+`"; filename="${Oa(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),i.push(`--${r}--`),new e(i,{type:"multipart/form-data; boundary="+r})}var Mr,Sd,xd,Ms,Td,$s,Oa,kt,At,Un=Fr(()=>{zr();Pa();({toStringTag:Mr,iterator:Sd,hasInstance:xd}=Symbol),Ms=Math.random,Td="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),$s=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[Mr])?[(r=r!==void 0?r+"":e[Mr]=="File"?e.name:"blob",t),e.name!==r||e[Mr]=="blob"?new cr([e],r,e):e]:[t,e+""]),Oa=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),kt=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},At=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Mr](){return"FormData"}[Sd](){return this.entries()}static[xd](e){return e&&typeof e=="object"&&e[Mr]==="FormData"&&!Td.some(r=>typeof e[r]!="function")}append(...e){kt("append",arguments,2),this.#e.push($s(...e))}delete(e){kt("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){kt("get",arguments,1),e+="";for(var r=this.#e,i=r.length,a=0;a<i;a++)if(r[a][0]===e)return r[a][1];return null}getAll(e,r){return kt("getAll",arguments,1),r=[],e+="",this.#e.forEach(i=>i[0]===e&&r.push(i[1])),r}has(e){return kt("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){kt("forEach",arguments,1);for(var[i,a]of this)e.call(r,a,i,this)}set(...e){kt("set",arguments,2);var r=[],i=!0;e=$s(...e),this.#e.forEach(a=>{a[0]===e[0]?i&&(i=!r.push(e)):r.push(a)}),i&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var Hs=Ea((zy,Vs)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=Wn("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}Vs.exports=globalThis.DOMException});import{statSync as $y,createReadStream as Ly,promises as Rd}from"node:fs";var Cd,Uy,Ba=Fr(()=>{Cd=Is(Hs(),1);Pa();zr();({stat:Uy}=Rd)});var Ys={};yd(Ys,{toFormData:()=>Bd});function Id(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",i=r.slice(r.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,s)=>String.fromCharCode(s)),i}async function Bd(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Na(r[1]||r[2]),a,s,l,c,d,f,p=[],g=new At,_=N=>{l+=P.decode(N,{stream:!0})},S=N=>{p.push(N)},v=()=>{let N=new cr(p,f,{type:d});g.append(c,N)},C=()=>{g.append(c,l)},P=new TextDecoder("utf-8");P.decode(),i.onPartBegin=function(){i.onPartData=_,i.onPartEnd=C,a="",s="",l="",c="",d="",f=null,p.length=0},i.onHeaderField=function(N){a+=P.decode(N,{stream:!0})},i.onHeaderValue=function(N){s+=P.decode(N,{stream:!0})},i.onHeaderEnd=function(){if(s+=P.decode(),a=a.toLowerCase(),a==="content-disposition"){let N=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);N&&(c=N[2]||N[3]||""),f=Id(s),f&&(i.onPartData=S,i.onPartEnd=v)}else a==="content-type"&&(d=s);s="",a=""};for await(let N of t)i.write(N);return i.end(),g}var Be,Y,Zs,ct,Hn,Zn,Ed,Lr,kd,Ad,Pd,Od,Pt,Na,Gs=Fr(()=>{Ba();Un();Be=0,Y={START_BOUNDARY:Be++,HEADER_FIELD_START:Be++,HEADER_FIELD:Be++,HEADER_VALUE_START:Be++,HEADER_VALUE:Be++,HEADER_VALUE_ALMOST_DONE:Be++,HEADERS_ALMOST_DONE:Be++,PART_DATA_START:Be++,PART_DATA:Be++,END:Be++},Zs=1,ct={PART_BOUNDARY:Zs,LAST_BOUNDARY:Zs*=2},Hn=10,Zn=13,Ed=32,Lr=45,kd=58,Ad=97,Pd=122,Od=t=>t|32,Pt=()=>{},Na=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=Pt,this.onHeaderField=Pt,this.onHeadersEnd=Pt,this.onHeaderValue=Pt,this.onPartBegin=Pt,this.onPartData=Pt,this.onPartEnd=Pt,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i),this.boundaryChars[r[i]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Y.START_BOUNDARY}write(e){let r=0,i=e.length,a=this.index,{lookbehind:s,boundary:l,boundaryChars:c,index:d,state:f,flags:p}=this,g=this.boundary.length,_=g-1,S=e.length,v,C,P=$=>{this[$+"Mark"]=r},N=$=>{delete this[$+"Mark"]},W=($,M,V,ce)=>{(M===void 0||M!==V)&&this[$](ce&&ce.subarray(M,V))},U=($,M)=>{let V=$+"Mark";V in this&&(M?(W($,this[V],r,e),delete this[V]):(W($,this[V],e.length,e),this[V]=0))};for(r=0;r<i;r++)switch(v=e[r],f){case Y.START_BOUNDARY:if(d===l.length-2){if(v===Lr)p|=ct.LAST_BOUNDARY;else if(v!==Zn)return;d++;break}else if(d-1===l.length-2){if(p&ct.LAST_BOUNDARY&&v===Lr)f=Y.END,p=0;else if(!(p&ct.LAST_BOUNDARY)&&v===Hn)d=0,W("onPartBegin"),f=Y.HEADER_FIELD_START;else return;break}v!==l[d+2]&&(d=-2),v===l[d+2]&&d++;break;case Y.HEADER_FIELD_START:f=Y.HEADER_FIELD,P("onHeaderField"),d=0;case Y.HEADER_FIELD:if(v===Zn){N("onHeaderField"),f=Y.HEADERS_ALMOST_DONE;break}if(d++,v===Lr)break;if(v===kd){if(d===1)return;U("onHeaderField",!0),f=Y.HEADER_VALUE_START;break}if(C=Od(v),C<Ad||C>Pd)return;break;case Y.HEADER_VALUE_START:if(v===Ed)break;P("onHeaderValue"),f=Y.HEADER_VALUE;case Y.HEADER_VALUE:v===Zn&&(U("onHeaderValue",!0),W("onHeaderEnd"),f=Y.HEADER_VALUE_ALMOST_DONE);break;case Y.HEADER_VALUE_ALMOST_DONE:if(v!==Hn)return;f=Y.HEADER_FIELD_START;break;case Y.HEADERS_ALMOST_DONE:if(v!==Hn)return;W("onHeadersEnd"),f=Y.PART_DATA_START;break;case Y.PART_DATA_START:f=Y.PART_DATA,P("onPartData");case Y.PART_DATA:if(a=d,d===0){for(r+=_;r<S&&!(e[r]in c);)r+=g;r-=_,v=e[r]}if(d<l.length)l[d]===v?(d===0&&U("onPartData",!0),d++):d=0;else if(d===l.length)d++,v===Zn?p|=ct.PART_BOUNDARY:v===Lr?p|=ct.LAST_BOUNDARY:d=0;else if(d-1===l.length)if(p&ct.PART_BOUNDARY){if(d=0,v===Hn){p&=~ct.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),f=Y.HEADER_FIELD_START;break}}else p&ct.LAST_BOUNDARY&&v===Lr?(W("onPartEnd"),f=Y.END,p=0):d=0;if(d>0)s[d-1]=v;else if(a>0){let $=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);W("onPartData",0,a,$),a=0,P("onPartData"),r--}break;case Y.END:break;default:throw new Error(`Unexpected state entered: ${f}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=d,this.state=f,this.flags=p}end(){if(this.state===Y.HEADER_FIELD_START&&this.index===0||this.state===Y.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Y.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});import jd from"node:http";import Ud from"node:https";import hr from"node:zlib";import cu,{PassThrough as fu,pipeline as pr}from"node:stream";import{Buffer as Jn}from"node:buffer";function bd(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),i="",a=!1,s=r[0]||"text/plain",l=s;for(let p=1;p<r.length;p++)r[p]==="base64"?a=!0:r[p]&&(l+=`;${r[p]}`,r[p].indexOf("charset=")===0&&(i=r[p].substring(8)));!r[0]&&!i.length&&(l+=";charset=US-ASCII",i="US-ASCII");let c=a?"base64":"ascii",d=unescape(t.substring(e+1)),f=Buffer.from(d,c);return f.type=s,f.typeFull=l,f.charset=i,f}var Bs=bd;zr();Un();import ft,{PassThrough as Qs}from"node:stream";import{types as Xs,deprecate as qa,promisify as Nd}from"node:util";import{Buffer as be}from"node:buffer";var Ze=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var ae=class extends Ze{constructor(e,r,i){super(e,r),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Vn=Symbol.toStringTag,Ia=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Vn]==="URLSearchParams",$r=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Vn]),Ws=t=>typeof t=="object"&&(t[Vn]==="AbortSignal"||t[Vn]==="EventTarget"),js=(t,e)=>{let r=new URL(e).hostname,i=new URL(t).hostname;return r===i||r.endsWith(`.${i}`)},Us=(t,e)=>{let r=new URL(e).protocol,i=new URL(t).protocol;return r===i};var Dd=Nd(ft.pipeline),oe=Symbol("Body internals"),Ne=class{constructor(e,{size:r=0}={}){let i=null;e===null?e=null:Ia(e)?e=be.from(e.toString()):$r(e)||be.isBuffer(e)||(Xs.isAnyArrayBuffer(e)?e=be.from(e):ArrayBuffer.isView(e)?e=be.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ft||(e instanceof At?(e=Ls(e),i=e.type.split("=")[1]):e=be.from(String(e))));let a=e;be.isBuffer(e)?a=ft.Readable.from(e):$r(e)&&(a=ft.Readable.from(e.stream())),this[oe]={body:e,stream:a,boundary:i,disturbed:!1,error:null},this.size=r,e instanceof ft&&e.on("error",s=>{let l=s instanceof Ze?s:new ae(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[oe].error=l})}get body(){return this[oe].stream}get bodyUsed(){return this[oe].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:i}=await Da(this);return e.slice(r,r+i)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let i=new At,a=new URLSearchParams(await this.text());for(let[s,l]of a)i.append(s,l);return i}let{toFormData:r}=await Promise.resolve().then(()=>(Gs(),Ys));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[oe].body&&this[oe].body.type||"",r=await this.arrayBuffer();return new He([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await Da(this);return new TextDecoder().decode(e)}buffer(){return Da(this)}};Ne.prototype.buffer=qa(Ne.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Ne.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:qa(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Da(t){if(t[oe].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[oe].disturbed=!0,t[oe].error)throw t[oe].error;let{body:e}=t;if(e===null)return be.alloc(0);if(!(e instanceof ft))return be.alloc(0);let r=[],i=0;try{for await(let a of e){if(t.size>0&&i+a.length>t.size){let s=new ae(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}i+=a.length,r.push(a)}}catch(a){throw a instanceof Ze?a:new ae(`Invalid response body while trying to fetch ${t.url}: ${a.message}`,"system",a)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(a=>typeof a=="string")?be.from(r.join("")):be.concat(r,i)}catch(a){throw new ae(`Could not create Buffer from response body for ${t.url}: ${a.message}`,"system",a)}else throw new ae(`Premature close of server response while trying to fetch ${t.url}`)}var fr=(t,e)=>{let r,i,{body:a}=t[oe];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof ft&&typeof a.getBoundary!="function"&&(r=new Qs({highWaterMark:e}),i=new Qs({highWaterMark:e}),a.pipe(r),a.pipe(i),t[oe].stream=r,a=i),a},qd=qa(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Yn=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Ia(t)?"application/x-www-form-urlencoded;charset=UTF-8":$r(t)?t.type||null:be.isBuffer(t)||Xs.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof At?`multipart/form-data; boundary=${e[oe].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${qd(t)}`:t instanceof ft?null:"text/plain;charset=UTF-8",Ks=t=>{let{body:e}=t[oe];return e===null?0:$r(e)?e.size:be.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},Js=async(t,{body:e})=>{e===null?t.end():await Dd(e,t)};import{types as eu}from"node:util";import Qn from"node:http";var Gn=typeof Qn.validateHeaderName=="function"?Qn.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Fa=typeof Qn.validateHeaderValue=="function"?Qn.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},de=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let i=e.raw();for(let[a,s]of Object.entries(i))r.push(...s.map(l=>[a,l]))}else if(e!=null)if(typeof e=="object"&&!eu.isBoxedPrimitive(e)){let i=e[Symbol.iterator];if(i==null)r.push(...Object.entries(e));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(a=>{if(typeof a!="object"||eu.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([i,a])=>(Gn(i),Fa(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(r),new Proxy(this,{get(i,a,s){switch(a){case"append":case"set":return(l,c)=>(Gn(l),Fa(l,String(c)),URLSearchParams.prototype[a].call(i,String(l).toLowerCase(),String(c)));case"delete":case"has":case"getAll":return l=>(Gn(l),URLSearchParams.prototype[a].call(i,String(l).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let i=r.join(", ");return/^content-encoding$/i.test(e)&&(i=i.toLowerCase()),i}forEach(e,r=void 0){for(let i of this.keys())Reflect.apply(e,r,[this.get(i),i,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let i=this.getAll(r);return r==="host"?e[r]=i[0]:e[r]=i.length>1?i:i[0],e},{})}};Object.defineProperties(de.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function tu(t=[]){return new de(t.reduce((e,r,i,a)=>(i%2===0&&e.push(a.slice(i,i+2)),e),[]).filter(([e,r])=>{try{return Gn(e),Fa(e,String(r)),!0}catch{return!1}}))}var Fd=new Set([301,302,303,307,308]),Xn=t=>Fd.has(t);var ke=Symbol("Response internals"),_e=class t extends Ne{constructor(e=null,r={}){super(e,r);let i=r.status!=null?r.status:200,a=new de(r.headers);if(e!==null&&!a.has("Content-Type")){let s=Yn(e,this);s&&a.append("Content-Type",s)}this[ke]={type:"default",url:r.url,status:i,statusText:r.statusText||"",headers:a,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[ke].type}get url(){return this[ke].url||""}get status(){return this[ke].status}get ok(){return this[ke].status>=200&&this[ke].status<300}get redirected(){return this[ke].counter>0}get statusText(){return this[ke].statusText}get headers(){return this[ke].headers}get highWaterMark(){return this[ke].highWaterMark}clone(){return new t(fr(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!Xn(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[ke].type="error",e}static json(e=void 0,r={}){let i=JSON.stringify(e);if(i===void 0)throw new TypeError("data is not JSON serializable");let a=new de(r&&r.headers);return a.has("content-type")||a.set("content-type","application/json"),new t(i,{...r,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(_e.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});import{format as $d}from"node:url";import{deprecate as Ld}from"node:util";var ru=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""};import{isIP as zd}from"node:net";function nu(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}var iu=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),au="strict-origin-when-cross-origin";function ou(t){if(!iu.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function Md(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=zd(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function dr(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:Md(t)}function su(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let i=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let a=t.referrer,s=nu(a),l=nu(a,!0);s.toString().length>4096&&(s=l),e&&(s=e(s)),r&&(l=r(l));let c=new URL(t.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return l;case"unsafe-url":return s;case"strict-origin":return dr(s)&&!dr(c)?"no-referrer":l.toString();case"strict-origin-when-cross-origin":return s.origin===c.origin?s:dr(s)&&!dr(c)?"no-referrer":l;case"same-origin":return s.origin===c.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===c.origin?s:l;case"no-referrer-when-downgrade":return dr(s)&&!dr(c)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function uu(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let i of e)i&&iu.has(i)&&(r=i);return r}var X=Symbol("Request internals"),Wr=t=>typeof t=="object"&&typeof t[X]=="object",Wd=Ld(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Ot=class t extends Ne{constructor(e,r={}){let i;if(Wr(e)?i=new URL(e.url):(i=new URL(e),e={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let a=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!Wr(r)&&"data"in r&&Wd(),(r.body!=null||Wr(e)&&e.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:Wr(e)&&e.body!==null?fr(e):null;super(s,{size:r.size||e.size||0});let l=new de(r.headers||e.headers||{});if(s!==null&&!l.has("Content-Type")){let f=Yn(s,this);f&&l.set("Content-Type",f)}let c=Wr(e)?e.signal:null;if("signal"in r&&(c=r.signal),c!=null&&!Ws(c))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let d=r.referrer==null?e.referrer:r.referrer;if(d==="")d="no-referrer";else if(d){let f=new URL(d);d=/^about:(\/\/)?client$/.test(f)?"client":f}else d=void 0;this[X]={method:a,redirect:r.redirect||e.redirect||"follow",headers:l,parsedURL:i,signal:c,referrer:d},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[X].method}get url(){return $d(this[X].parsedURL)}get headers(){return this[X].headers}get redirect(){return this[X].redirect}get signal(){return this[X].signal}get referrer(){if(this[X].referrer==="no-referrer")return"";if(this[X].referrer==="client")return"about:client";if(this[X].referrer)return this[X].referrer.toString()}get referrerPolicy(){return this[X].referrerPolicy}set referrerPolicy(e){this[X].referrerPolicy=ou(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Ot.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var lu=t=>{let{parsedURL:e}=t[X],r=new de(t[X].headers);r.has("Accept")||r.set("Accept","*/*");let i=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(i="0"),t.body!==null){let c=Ks(t);typeof c=="number"&&!Number.isNaN(c)&&(i=String(c))}i&&r.set("Content-Length",i),t.referrerPolicy===""&&(t.referrerPolicy=au),t.referrer&&t.referrer!=="no-referrer"?t[X].referrer=su(t):t[X].referrer="no-referrer",t[X].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=t;typeof a=="function"&&(a=a(e));let s=ru(e),l={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:a};return{parsedURL:e,options:l}};var Kn=class extends Ze{constructor(e,r="aborted"){super(e,r)}};Un();Ba();var Vd=new Set(["data:","http:","https:"]);async function ei(t,e){return new Promise((r,i)=>{let a=new Ot(t,e),{parsedURL:s,options:l}=lu(a);if(!Vd.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let v=Bs(a.url),C=new _e(v,{headers:{"Content-Type":v.typeFull}});r(C);return}let c=(s.protocol==="https:"?Ud:jd).request,{signal:d}=a,f=null,p=()=>{let v=new Kn("The operation was aborted.");i(v),a.body&&a.body instanceof cu.Readable&&a.body.destroy(v),!(!f||!f.body)&&f.body.emit("error",v)};if(d&&d.aborted){p();return}let g=()=>{p(),S()},_=c(s.toString(),l);d&&d.addEventListener("abort",g);let S=()=>{_.abort(),d&&d.removeEventListener("abort",g)};_.on("error",v=>{i(new ae(`request to ${a.url} failed, reason: ${v.message}`,"system",v)),S()}),Hd(_,v=>{f&&f.body&&f.body.destroy(v)}),process.version<"v14"&&_.on("socket",v=>{let C;v.prependListener("end",()=>{C=v._eventsCount}),v.prependListener("close",P=>{if(f&&C<v._eventsCount&&!P){let N=new Error("Premature close");N.code="ERR_STREAM_PREMATURE_CLOSE",f.body.emit("error",N)}})}),_.on("response",v=>{_.setTimeout(0);let C=tu(v.rawHeaders);if(Xn(v.statusCode)){let $=C.get("Location"),M=null;try{M=$===null?null:new URL($,a.url)}catch{if(a.redirect!=="manual"){i(new ae(`uri requested responds with an invalid redirect URL: ${$}`,"invalid-redirect")),S();return}}switch(a.redirect){case"error":i(new ae(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),S();return;case"manual":break;case"follow":{if(M===null)break;if(a.counter>=a.follow){i(new ae(`maximum redirect reached at: ${a.url}`,"max-redirect")),S();return}let V={headers:new de(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:fr(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!js(a.url,M)||!Us(a.url,M))for(let Te of["authorization","www-authenticate","cookie","cookie2"])V.headers.delete(Te);if(v.statusCode!==303&&a.body&&e.body instanceof cu.Readable){i(new ae("Cannot follow redirect with body being a readable stream","unsupported-redirect")),S();return}(v.statusCode===303||(v.statusCode===301||v.statusCode===302)&&a.method==="POST")&&(V.method="GET",V.body=void 0,V.headers.delete("content-length"));let ce=uu(C);ce&&(V.referrerPolicy=ce),r(ei(new Ot(M,V))),S();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}d&&v.once("end",()=>{d.removeEventListener("abort",g)});let P=pr(v,new fu,$=>{$&&i($)});process.version<"v12.10"&&v.on("aborted",g);let N={url:a.url,status:v.statusCode,statusText:v.statusMessage,headers:C,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},W=C.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||W===null||v.statusCode===204||v.statusCode===304){f=new _e(P,N),r(f);return}let U={flush:hr.Z_SYNC_FLUSH,finishFlush:hr.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){P=pr(P,hr.createGunzip(U),$=>{$&&i($)}),f=new _e(P,N),r(f);return}if(W==="deflate"||W==="x-deflate"){let $=pr(v,new fu,M=>{M&&i(M)});$.once("data",M=>{(M[0]&15)===8?P=pr(P,hr.createInflate(),V=>{V&&i(V)}):P=pr(P,hr.createInflateRaw(),V=>{V&&i(V)}),f=new _e(P,N),r(f)}),$.once("end",()=>{f||(f=new _e(P,N),r(f))});return}if(W==="br"){P=pr(P,hr.createBrotliDecompress(),$=>{$&&i($)}),f=new _e(P,N),r(f);return}f=new _e(P,N),r(f)}),Js(_,a).catch(i)})}function Hd(t,e){let r=Jn.from(`0\r
\r
`),i=!1,a=!1,s;t.on("response",l=>{let{headers:c}=l;i=c["transfer-encoding"]==="chunked"&&!c["content-length"]}),t.on("socket",l=>{let c=()=>{if(i&&!a){let f=new Error("Premature close");f.code="ERR_STREAM_PREMATURE_CLOSE",e(f)}},d=f=>{a=Jn.compare(f.slice(-5),r)===0,!a&&s&&(a=Jn.compare(s.slice(-3),r.slice(0,3))===0&&Jn.compare(f.slice(-2),r.slice(3))===0),s=f};l.prependListener("close",c),l.on("data",d),t.on("close",()=>{l.removeListener("close",c),l.removeListener("data",d)})})}import{performance as za}from"perf_hooks";var Zd=3e4,hu=new Date,du={dataReceived:!1,responseTime:null,downloadTime:null,totalTime:null,contentSize:null,date:hu},pu=async t=>Promise.all(t.map(Yd)),Yd=async t=>{let e=za.now(),r=new AbortController,i=t.maxTimeout||Zd,a=setTimeout(()=>r.abort(),i),s=t.queryString?`${t.url}${t.queryString}`:t.url;try{let l=await ei(s,{signal:r.signal}),c=za.now()-e;if(!l.ok)return clearTimeout(a),{id:t.id,apiName:t.apiName,...du,error:`Request failed with status ${l.status}`};let d=await l.arrayBuffer(),f=za.now()-e-c;return clearTimeout(a),{id:t.id,apiName:t.apiName,dataReceived:!0,responseTime:c,downloadTime:f,totalTime:c+f,contentSize:d.byteLength,date:hu,error:null}}catch(l){return clearTimeout(a),{id:t.id,apiName:t.apiName,...du,error:l instanceof Error?l.name==="AbortError"?`Request timed out after ${i}ms`:l.message:"Unknown error occurred"}}};var ti=new Date().getFullYear(),mu=[{id:1,apiName:"masterDonors",url:"https://cbpfgms.github.io/pfbi-data/mst/MstDonor.json",queryString:null,charts:["CBPF_by_year"],apiType:"master"},{id:2,apiName:"masterFunds",url:"https://cbpfgms.github.io/pfbi-data/mst/MstCountry.json",queryString:null,charts:["CBPF_by_year","Results_dashboard"],apiType:"master"},{id:3,apiName:"masterRegionalFunds",url:"https://cbpfgms.github.io/pfbi-data/mst/MstRhpf.json",queryString:null,charts:["Contributions","Allocations","Funding_overview","Gender_with_age_marker","CBPF_vs_HRP"],apiType:"master"},{id:4,apiName:"masterAllocationTypes",url:"https://cbpfgms.github.io/pfbi-data/mst/MstAllocation.json",queryString:null,charts:["CBPF_by_year","Results_dashboard"],apiType:"master"},{id:5,apiName:"launchedAllocationsData",url:"https://cbpfapi.unocha.org/vo2/odata/AllocationTypes",queryString:"?PoolfundCodeAbbrv=&$format=csv",charts:["CBPF_by_year","Allocation_flow","Allocations","Allocations_timeline","Sectors","Gender_with_age_marker","Progress_dashboard","Allocations_overview"],apiType:"data"},{id:6,apiName:"contributionsData",url:"https://cbpfgms.github.io/pfbi-data/contributionSummarySankey.csv",queryString:null,charts:["CBPF_by_year"],apiType:"data"},{id:7,apiName:"allocationFlowData",url:"https://cbpfapi.unocha.org/vo2/odata/AllocationFlowByOrgType",queryString:"?PoolfundCodeAbbrv=&$format=csv",charts:["Allocation_flow"],apiType:"data"},{id:8,apiName:"masterPooledFunds",url:"https://cbpfapi.unocha.org/vo2/odata/MstPooledFund",queryString:"?$format=csv",charts:["Allocation_flow","Progress_dashboard","Allocations_overview"],apiType:"master"},{id:9,apiName:"masterPartners",url:"https://cbpfapi.unocha.org/vo2/odata/MstOrgType",queryString:"?$format=csv",charts:["Allocation_flow","Progress_dashboard","Allocations_overview"],apiType:"master"},{id:10,apiName:"masterSubPartners",url:"https://cbpfapi.unocha.org/vo2/odata/SubIPType",queryString:"?$format=csv",charts:["Allocation_flow"],apiType:"master"},{id:11,apiName:"allocationsData",url:"https://cbpfapi.unocha.org/vo2/odata/AllocationBudgetTotalsByYearAndFund",queryString:"?&FundingType=3&$format=csv",charts:["Allocations"],apiType:"data"},{id:12,apiName:"contributionsTotalData",url:"https://cbpfapi.unocha.org/vo2/odata/ContributionTotal",queryString:"?$format=csv&ShowAllPooledFunds=1",charts:["Contributions","Contribution_trends","Funding_overview"],apiType:"data"},{id:13,apiName:"targetedPersonsData",url:"https://cbpfapi.unocha.org/vo2/odata/PoolFundBeneficiarySummary",queryString:"?$format=csv&ShowAllPooledFunds=1",charts:["Sectors"],apiType:"data"},{id:14,apiName:"targetedPersonsDetailsData",url:"https://cbpfapi.unocha.org/vo2/odata/ProjectSummaryBeneficiaryDetail",queryString:"?$format=csv",charts:["Targeted_and_reached_people"],apiType:"data"},{id:15,apiName:"dataGam",url:"https://cbpfapi.unocha.org/vo2/odata/ProjectGAMSummary",queryString:"?$format=csv",charts:["Gender_with_age_marker"],apiType:"data"},{id:16,apiName:"masterGam",url:"https://cbpfapi.unocha.org/vo2/odata/GenderMarker",queryString:"?$format=csv",charts:["Gender_with_age_marker"],apiType:"master"},{id:17,apiName:"masterOrganizations",url:"https://cbpfgms.github.io/pfbi-data/mst/MstOrganization.json",queryString:null,charts:["Results_dashboard"],apiType:"master"},{id:18,apiName:"masterSectors",url:"https://cbpfgms.github.io/pfbi-data/mst/MstCluster.json",queryString:null,charts:["Results_dashboard"],apiType:"master"},{id:19,apiName:"allocationsDataResults",url:"https://cbpfapi.unocha.org/vo2/odata/AllocationBudgetTotalsByYearAndFund",queryString:"?poolfundAbbrv=&$format=csv",charts:["Results_dashboard"],apiType:"data"},{id:20,apiName:"resultsBySector",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/ByCluster.csv",queryString:null,charts:["Results_dashboard"],apiType:"data"},{id:21,apiName:"resultsByDisability",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/ByGender_Disability.csv",queryString:null,charts:["Results_dashboard"],apiType:"data"},{id:22,apiName:"resultsByType",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/ByLocation.csv",queryString:null,charts:["Results_dashboard"],apiType:"data"},{id:23,apiName:"resultsByBeneficiaryType",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/ByType.csv",queryString:null,charts:["Results_dashboard"],apiType:"data"},{id:24,apiName:"resultsByOrganization",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/ByOrganization.csv",queryString:null,charts:["Results_dashboard"],apiType:"data"},{id:25,apiName:"masterLocations",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/locationMst.csv",queryString:null,charts:["Results_dashboard"],apiType:"master"},{id:26,apiName:"masterBeneficiaryType",url:"https://cbpfgms.github.io/pfbi-data/cbpf/results/MstBeneficiaryType.csv",queryString:null,charts:["Results_dashboard","Progress_dashboard"],apiType:"master"},{id:27,apiName:"projectSummaryProgress",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:`?SPCode=PF_PROJ_SUMMARY&PoolfundCodeAbbrv=&ShowAllPooledFunds=&AllocationYears=${ti}&FundTypeId=1&$format=csv`,charts:["Progress_dashboard"],apiType:"data"},{id:28,apiName:"sectorsData",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:`?SPCode=PF_RPT_CLST_BENEF&PoolfundCodeAbbrv=&ShowAllPooledFunds=&AllocationYears=${ti}&FundTypeId=1&$format=csv`,charts:["Progress_dashboard"],apiType:"data"},{id:29,apiName:"globalIndicators",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:"?SPCode=PF_GLB_INDIC&PoolfundCodeAbbrv=&ShowAllPooledFunds=&AllocationYears=&IndicatorTypeId=&FundTypeId=1&$format=csv",charts:["Progress_dashboard"],apiType:"data"},{id:30,apiName:"masterOrganizationsProgress",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:"?SPCode=PF_ORG_SUMMARY&PoolfundCodeAbbrv=&FundTypeId=1&$format=csv",charts:["Progress_dashboard"],apiType:"master"},{id:31,apiName:"projectStatusMaster",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:"?SPCode=PF_GLB_STATUS&PoolfundCodeAbbrv=&InstanceTypeId=&FundTypeId=1&$format=csv",charts:["Progress_dashboard"],apiType:"master"},{id:32,apiName:"masterAllocationSource",url:"https://cbpfapi.unocha.org/vo2/odata/MstAllocationSource",queryString:"?$format=csv",charts:["Progress_dashboard","Allocations_overview"],apiType:"master"},{id:33,apiName:"masterSectorsVo2",url:"https://cbpfapi.unocha.org/vo2/odata/MstClusters",queryString:"?$format=csv",charts:["Progress_dashboard","Allocations_overview"],apiType:"master"},{id:34,apiName:"masterGlobalIndicators",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:"?SPCode=GLB_INDIC_MST&GlobalIndicatorType=&$format=csv",charts:["Progress_dashboard"],apiType:"master"},{id:35,apiName:"masterEmergencies",url:"https://cbpfapi.unocha.org/vo3/odata/GlobalGenericDataExtract",queryString:"?SPCode=EMERG_TYPE_MST&$format=csv",charts:["Progress_dashboard"],apiType:"master"},{id:36,apiName:"projectSummary",url:"https://cbpfapi.unocha.org/vo2/odata/ProjectSummaryV2",queryString:`?AllocationYear=${ti}&$format=csv`,charts:["Allocations_overview"],apiType:"data"},{id:37,apiName:"projectSummaryAggregate",url:"https://cbpfapi.unocha.org/vo2/odata/ProjectSummaryAggV2",queryString:`?AllocationYear=${ti}&$format=csv`,charts:["Allocations_overview"],apiType:"data"},{id:38,apiName:"HRPSummary",url:"https://cbpfapi.unocha.org/vo2/odata/HRPCBPFFundingSummary",queryString:"?PoolfundCodeAbbrv=&$format=csv",charts:["CBPF_vs_HRP"],apiType:"data"}];import{readdir as Gd,stat as Qd,readFile as Xd,unlink as Kd}from"fs/promises";import*as jr from"path";var Jd=10;async function yu(t){try{let r=(await Gd(t)).filter(c=>jr.extname(c).toLowerCase()===".csv");if(r.length===0)return console.log("No CSV files found in directory"),null;let i=await Promise.all(r.map(async c=>{let d=jr.join(t,c),f=await Qd(d);return{filename:c,modifiedTime:f.mtime,filePath:d}}));if(i.sort((c,d)=>d.modifiedTime.getTime()-c.modifiedTime.getTime()),i.length>Jd){let c=i[i.length-1];try{await Kd(c.filePath),console.log(`Deleted oldest file: ${c.filename} (modified ${c.modifiedTime})`)}catch(d){console.error(`Failed to delete oldest file ${c.filename}:`,d)}}let a=i[0],s=jr.join(t,a.filename);return await Xd(s,"utf-8")}catch(e){throw e instanceof Error?new Error(`Error processing CSV files: ${e.message}`):e}}var eh={value:()=>{}};function bu(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new ri(r)}function ri(t){this._=t}function th(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",a=r.indexOf(".");if(a>=0&&(i=r.slice(a+1),r=r.slice(0,a)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}ri.prototype=bu.prototype={constructor:ri,on:function(t,e){var r=this._,i=th(t+"",r),a,s=-1,l=i.length;if(arguments.length<2){for(;++s<l;)if((a=(t=i[s]).type)&&(a=rh(r[a],t.name)))return a;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<l;)if(a=(t=i[s]).type)r[a]=gu(r[a],t.name,e);else if(e==null)for(a in r)r[a]=gu(r[a],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new ri(t)},call:function(t,e){if((a=arguments.length-2)>0)for(var r=new Array(a),i=0,a,s;i<a;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,a=s.length;i<a;++i)s[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],a=0,s=i.length;a<s;++a)i[a].value.apply(e,r)}};function rh(t,e){for(var r=0,i=t.length,a;r<i;++r)if((a=t[r]).name===e)return a.value}function gu(t,e,r){for(var i=0,a=t.length;i<a;++i)if(t[i].name===e){t[i]=eh,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var Ma=bu;var ni="http://www.w3.org/1999/xhtml",$a={svg:"http://www.w3.org/2000/svg",xhtml:ni,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ye(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),$a.hasOwnProperty(e)?{space:$a[e],local:t}:t}function nh(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===ni&&e.documentElement.namespaceURI===ni?e.createElement(t):e.createElementNS(r,t)}}function ih(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ii(t){var e=Ye(t);return(e.local?ih:nh)(e)}function ah(){}function It(t){return t==null?ah:function(){return this.querySelector(t)}}function _u(t){typeof t!="function"&&(t=It(t));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],l=s.length,c=i[a]=new Array(l),d,f,p=0;p<l;++p)(d=s[p])&&(f=t.call(d,d.__data__,p,s))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f);return new G(i,this._parents)}function La(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function oh(){return[]}function Ur(t){return t==null?oh:function(){return this.querySelectorAll(t)}}function sh(t){return function(){return La(t.apply(this,arguments))}}function vu(t){typeof t=="function"?t=sh(t):t=Ur(t);for(var e=this._groups,r=e.length,i=[],a=[],s=0;s<r;++s)for(var l=e[s],c=l.length,d,f=0;f<c;++f)(d=l[f])&&(i.push(t.call(d,d.__data__,f,l)),a.push(d));return new G(i,a)}function Vr(t){return function(){return this.matches(t)}}function ai(t){return function(e){return e.matches(t)}}var uh=Array.prototype.find;function lh(t){return function(){return uh.call(this.children,t)}}function ch(){return this.firstElementChild}function wu(t){return this.select(t==null?ch:lh(typeof t=="function"?t:ai(t)))}var fh=Array.prototype.filter;function dh(){return Array.from(this.children)}function hh(t){return function(){return fh.call(this.children,t)}}function Su(t){return this.selectAll(t==null?dh:hh(typeof t=="function"?t:ai(t)))}function xu(t){typeof t!="function"&&(t=Vr(t));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],l=s.length,c=i[a]=[],d,f=0;f<l;++f)(d=s[f])&&t.call(d,d.__data__,f,s)&&c.push(d);return new G(i,this._parents)}function oi(t){return new Array(t.length)}function Tu(){return new G(this._enter||this._groups.map(oi),this._parents)}function Hr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Hr.prototype={constructor:Hr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Ru(t){return function(){return t}}function ph(t,e,r,i,a,s){for(var l=0,c,d=e.length,f=s.length;l<f;++l)(c=e[l])?(c.__data__=s[l],i[l]=c):r[l]=new Hr(t,s[l]);for(;l<d;++l)(c=e[l])&&(a[l]=c)}function mh(t,e,r,i,a,s,l){var c,d,f=new Map,p=e.length,g=s.length,_=new Array(p),S;for(c=0;c<p;++c)(d=e[c])&&(_[c]=S=l.call(d,d.__data__,c,e)+"",f.has(S)?a[c]=d:f.set(S,d));for(c=0;c<g;++c)S=l.call(t,s[c],c,s)+"",(d=f.get(S))?(i[c]=d,d.__data__=s[c],f.delete(S)):r[c]=new Hr(t,s[c]);for(c=0;c<p;++c)(d=e[c])&&f.get(_[c])===d&&(a[c]=d)}function yh(t){return t.__data__}function Cu(t,e){if(!arguments.length)return Array.from(this,yh);var r=e?mh:ph,i=this._parents,a=this._groups;typeof t!="function"&&(t=Ru(t));for(var s=a.length,l=new Array(s),c=new Array(s),d=new Array(s),f=0;f<s;++f){var p=i[f],g=a[f],_=g.length,S=gh(t.call(p,p&&p.__data__,f,i)),v=S.length,C=c[f]=new Array(v),P=l[f]=new Array(v),N=d[f]=new Array(_);r(p,g,C,P,N,S,e);for(var W=0,U=0,$,M;W<v;++W)if($=C[W]){for(W>=U&&(U=W+1);!(M=P[U])&&++U<v;);$._next=M||null}}return l=new G(l,i),l._enter=c,l._exit=d,l}function gh(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Eu(){return new G(this._exit||this._groups.map(oi),this._parents)}function ku(t,e,r){var i=this.enter(),a=this,s=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(a=e(a),a&&(a=a.selection())),r==null?s.remove():r(s),i&&a?i.merge(a).order():a}function Au(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,a=r.length,s=i.length,l=Math.min(a,s),c=new Array(a),d=0;d<l;++d)for(var f=r[d],p=i[d],g=f.length,_=c[d]=new Array(g),S,v=0;v<g;++v)(S=f[v]||p[v])&&(_[v]=S);for(;d<a;++d)c[d]=r[d];return new G(c,this._parents)}function Pu(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],a=i.length-1,s=i[a],l;--a>=0;)(l=i[a])&&(s&&l.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(l,s),s=l);return this}function Ou(t){t||(t=bh);function e(g,_){return g&&_?t(g.__data__,_.__data__):!g-!_}for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s){for(var l=r[s],c=l.length,d=a[s]=new Array(c),f,p=0;p<c;++p)(f=l[p])&&(d[p]=f);d.sort(e)}return new G(a,this._parents).order()}function bh(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Iu(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Bu(){return Array.from(this)}function Nu(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],a=0,s=i.length;a<s;++a){var l=i[a];if(l)return l}return null}function Du(){let t=0;for(let e of this)++t;return t}function qu(){return!this.node()}function Fu(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var a=e[r],s=0,l=a.length,c;s<l;++s)(c=a[s])&&t.call(c,c.__data__,s,a);return this}function _h(t){return function(){this.removeAttribute(t)}}function vh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wh(t,e){return function(){this.setAttribute(t,e)}}function Sh(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function xh(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Th(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function zu(t,e){var r=Ye(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?vh:_h:typeof e=="function"?r.local?Th:xh:r.local?Sh:wh)(r,e))}function si(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Rh(t){return function(){this.style.removeProperty(t)}}function Ch(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Eh(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function Mu(t,e,r){return arguments.length>1?this.each((e==null?Rh:typeof e=="function"?Eh:Ch)(t,e,r??"")):dt(this.node(),t)}function dt(t,e){return t.style.getPropertyValue(e)||si(t).getComputedStyle(t,null).getPropertyValue(e)}function kh(t){return function(){delete this[t]}}function Ah(t,e){return function(){this[t]=e}}function Ph(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function $u(t,e){return arguments.length>1?this.each((e==null?kh:typeof e=="function"?Ph:Ah)(t,e)):this.node()[t]}function Lu(t){return t.trim().split(/^|\s+/)}function Wa(t){return t.classList||new Wu(t)}function Wu(t){this._node=t,this._names=Lu(t.getAttribute("class")||"")}Wu.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function ju(t,e){for(var r=Wa(t),i=-1,a=e.length;++i<a;)r.add(e[i])}function Uu(t,e){for(var r=Wa(t),i=-1,a=e.length;++i<a;)r.remove(e[i])}function Oh(t){return function(){ju(this,t)}}function Ih(t){return function(){Uu(this,t)}}function Bh(t,e){return function(){(e.apply(this,arguments)?ju:Uu)(this,t)}}function Vu(t,e){var r=Lu(t+"");if(arguments.length<2){for(var i=Wa(this.node()),a=-1,s=r.length;++a<s;)if(!i.contains(r[a]))return!1;return!0}return this.each((typeof e=="function"?Bh:e?Oh:Ih)(r,e))}function Nh(){this.textContent=""}function Dh(t){return function(){this.textContent=t}}function qh(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Hu(t){return arguments.length?this.each(t==null?Nh:(typeof t=="function"?qh:Dh)(t)):this.node().textContent}function Fh(){this.innerHTML=""}function zh(t){return function(){this.innerHTML=t}}function Mh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Zu(t){return arguments.length?this.each(t==null?Fh:(typeof t=="function"?Mh:zh)(t)):this.node().innerHTML}function $h(){this.nextSibling&&this.parentNode.appendChild(this)}function Yu(){return this.each($h)}function Lh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gu(){return this.each(Lh)}function Qu(t){var e=typeof t=="function"?t:ii(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Wh(){return null}function Xu(t,e){var r=typeof t=="function"?t:ii(t),i=e==null?Wh:typeof e=="function"?e:It(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function jh(){var t=this.parentNode;t&&t.removeChild(this)}function Ku(){return this.each(jh)}function Uh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ju(t){return this.select(t?Vh:Uh)}function el(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Hh(t){return function(e){t.call(this,e,this.__data__)}}function Zh(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function Yh(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,a=e.length,s;r<a;++r)s=e[r],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++i]=s;++i?e.length=i:delete this.__on}}}function Gh(t,e,r){return function(){var i=this.__on,a,s=Hh(e);if(i){for(var l=0,c=i.length;l<c;++l)if((a=i[l]).type===t.type&&a.name===t.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=e;return}}this.addEventListener(t.type,s,r),a={type:t.type,name:t.name,value:e,listener:s,options:r},i?i.push(a):this.__on=[a]}}function tl(t,e,r){var i=Zh(t+""),a,s=i.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,p;d<f;++d)for(a=0,p=c[d];a<s;++a)if((l=i[a]).type===p.type&&l.name===p.name)return p.value}return}for(c=e?Gh:Yh,a=0;a<s;++a)this.each(c(i[a],e,r));return this}function rl(t,e,r){var i=si(t),a=i.CustomEvent;typeof a=="function"?a=new a(e,r):(a=i.document.createEvent("Event"),r?(a.initEvent(e,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(e,!1,!1)),t.dispatchEvent(a)}function Qh(t,e){return function(){return rl(this,t,e)}}function Xh(t,e){return function(){return rl(this,t,e.apply(this,arguments))}}function nl(t,e){return this.each((typeof e=="function"?Xh:Qh)(t,e))}function*il(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],a=0,s=i.length,l;a<s;++a)(l=i[a])&&(yield l)}var Kh=[null];function G(t,e){this._groups=t,this._parents=e}function al(){return new G([[document.documentElement]],Kh)}function Jh(){return this}G.prototype=al.prototype={constructor:G,select:_u,selectAll:vu,selectChild:wu,selectChildren:Su,filter:xu,data:Cu,enter:Tu,exit:Eu,join:ku,merge:Au,selection:Jh,order:Pu,sort:Ou,call:Iu,nodes:Bu,node:Nu,size:Du,empty:qu,each:Fu,attr:zu,style:Mu,property:$u,classed:Vu,text:Hu,html:Zu,raise:Yu,lower:Gu,append:Qu,insert:Xu,remove:Ku,clone:Ju,datum:el,on:tl,dispatch:nl,[Symbol.iterator]:il};var Ge=al;function ui(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function ja(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function Gr(){}var Zr=.7,fi=1/Zr,mr="\\s*([+-]?\\d+)\\s*",Yr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",De="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ep=/^#([0-9a-f]{3,8})$/,tp=new RegExp(`^rgb\\(${mr},${mr},${mr}\\)$`),rp=new RegExp(`^rgb\\(${De},${De},${De}\\)$`),np=new RegExp(`^rgba\\(${mr},${mr},${mr},${Yr}\\)$`),ip=new RegExp(`^rgba\\(${De},${De},${De},${Yr}\\)$`),ap=new RegExp(`^hsl\\(${Yr},${De},${De}\\)$`),op=new RegExp(`^hsla\\(${Yr},${De},${De},${Yr}\\)$`),ol={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ui(Gr,ht,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:sl,formatHex:sl,formatHex8:sp,formatHsl:up,formatRgb:ul,toString:ul});function sl(){return this.rgb().formatHex()}function sp(){return this.rgb().formatHex8()}function up(){return pl(this).formatHsl()}function ul(){return this.rgb().formatRgb()}function ht(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=ep.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ll(e):r===3?new se(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?li(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?li(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=tp.exec(t))?new se(e[1],e[2],e[3],1):(e=rp.exec(t))?new se(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=np.exec(t))?li(e[1],e[2],e[3],e[4]):(e=ip.exec(t))?li(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ap.exec(t))?dl(e[1],e[2]/100,e[3]/100,1):(e=op.exec(t))?dl(e[1],e[2]/100,e[3]/100,e[4]):ol.hasOwnProperty(t)?ll(ol[t]):t==="transparent"?new se(NaN,NaN,NaN,0):null}function ll(t){return new se(t>>16&255,t>>8&255,t&255,1)}function li(t,e,r,i){return i<=0&&(t=e=r=NaN),new se(t,e,r,i)}function lp(t){return t instanceof Gr||(t=ht(t)),t?(t=t.rgb(),new se(t.r,t.g,t.b,t.opacity)):new se}function yr(t,e,r,i){return arguments.length===1?lp(t):new se(t,e,r,i??1)}function se(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}ui(se,yr,ja(Gr,{brighter(t){return t=t==null?fi:Math.pow(fi,t),new se(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Zr:Math.pow(Zr,t),new se(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new se(Nt(this.r),Nt(this.g),Nt(this.b),di(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cl,formatHex:cl,formatHex8:cp,formatRgb:fl,toString:fl}));function cl(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}`}function cp(){return`#${Bt(this.r)}${Bt(this.g)}${Bt(this.b)}${Bt((isNaN(this.opacity)?1:this.opacity)*255)}`}function fl(){let t=di(this.opacity);return`${t===1?"rgb(":"rgba("}${Nt(this.r)}, ${Nt(this.g)}, ${Nt(this.b)}${t===1?")":`, ${t})`}`}function di(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Bt(t){return t=Nt(t),(t<16?"0":"")+t.toString(16)}function dl(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Ae(t,e,r,i)}function pl(t){if(t instanceof Ae)return new Ae(t.h,t.s,t.l,t.opacity);if(t instanceof Gr||(t=ht(t)),!t)return new Ae;if(t instanceof Ae)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,a=Math.min(e,r,i),s=Math.max(e,r,i),l=NaN,c=s-a,d=(s+a)/2;return c?(e===s?l=(r-i)/c+(r<i)*6:r===s?l=(i-e)/c+2:l=(e-r)/c+4,c/=d<.5?s+a:2-s-a,l*=60):c=d>0&&d<1?0:l,new Ae(l,c,d,t.opacity)}function ml(t,e,r,i){return arguments.length===1?pl(t):new Ae(t,e,r,i??1)}function Ae(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}ui(Ae,ml,ja(Gr,{brighter(t){return t=t==null?fi:Math.pow(fi,t),new Ae(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Zr:Math.pow(Zr,t),new Ae(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,a=2*r-i;return new se(Ua(t>=240?t-240:t+120,a,i),Ua(t,a,i),Ua(t<120?t+240:t-120,a,i),this.opacity)},clamp(){return new Ae(hl(this.h),ci(this.s),ci(this.l),di(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let t=di(this.opacity);return`${t===1?"hsl(":"hsla("}${hl(this.h)}, ${ci(this.s)*100}%, ${ci(this.l)*100}%${t===1?")":`, ${t})`}`}}));function hl(t){return t=(t||0)%360,t<0?t+360:t}function ci(t){return Math.max(0,Math.min(1,t||0))}function Ua(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}function Va(t,e,r,i,a){var s=t*t,l=s*t;return((1-3*t+3*s-l)*e+(4-6*s+3*l)*r+(1+3*t+3*s-3*l)*i+l*a)/6}function yl(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),a=t[i],s=t[i+1],l=i>0?t[i-1]:2*a-s,c=i<e-1?t[i+2]:2*s-a;return Va((r-i/e)*e,l,a,s,c)}}function gl(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e),a=t[(i+e-1)%e],s=t[i%e],l=t[(i+1)%e],c=t[(i+2)%e];return Va((r-i/e)*e,a,s,l,c)}}var Ha=t=>()=>t;function fp(t,e){return function(r){return t+r*e}}function dp(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function bl(t){return(t=+t)==1?hi:function(e,r){return r-e?dp(e,r,t):Ha(isNaN(e)?r:e)}}function hi(t,e){var r=e-t;return r?fp(t,r):Ha(isNaN(t)?e:t)}var pi=function t(e){var r=bl(e);function i(a,s){var l=r((a=yr(a)).r,(s=yr(s)).r),c=r(a.g,s.g),d=r(a.b,s.b),f=hi(a.opacity,s.opacity);return function(p){return a.r=l(p),a.g=c(p),a.b=d(p),a.opacity=f(p),a+""}}return i.gamma=t,i}(1);function _l(t){return function(e){var r=e.length,i=new Array(r),a=new Array(r),s=new Array(r),l,c;for(l=0;l<r;++l)c=yr(e[l]),i[l]=c.r||0,a[l]=c.g||0,s[l]=c.b||0;return i=t(i),a=t(a),s=t(s),c.opacity=1,function(d){return c.r=i(d),c.g=a(d),c.b=s(d),c+""}}}var hp=_l(yl),pp=_l(gl);function ve(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var Ya=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Za=new RegExp(Ya.source,"g");function mp(t){return function(){return t}}function yp(t){return function(e){return t(e)+""}}function Ga(t,e){var r=Ya.lastIndex=Za.lastIndex=0,i,a,s,l=-1,c=[],d=[];for(t=t+"",e=e+"";(i=Ya.exec(t))&&(a=Za.exec(e));)(s=a.index)>r&&(s=e.slice(r,s),c[l]?c[l]+=s:c[++l]=s),(i=i[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,d.push({i:l,x:ve(i,a)})),r=Za.lastIndex;return r<e.length&&(s=e.slice(r),c[l]?c[l]+=s:c[++l]=s),c.length<2?d[0]?yp(d[0].x):mp(e):(e=d.length,function(f){for(var p=0,g;p<e;++p)c[(g=d[p]).i]=g.x(f);return c.join("")})}var vl=180/Math.PI,mi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qa(t,e,r,i,a,s){var l,c,d;return(l=Math.sqrt(t*t+e*e))&&(t/=l,e/=l),(d=t*r+e*i)&&(r-=t*d,i-=e*d),(c=Math.sqrt(r*r+i*i))&&(r/=c,i/=c,d/=c),t*i<e*r&&(t=-t,e=-e,d=-d,l=-l),{translateX:a,translateY:s,rotate:Math.atan2(e,t)*vl,skewX:Math.atan(d)*vl,scaleX:l,scaleY:c}}var yi;function wl(t){let e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?mi:Qa(e.a,e.b,e.c,e.d,e.e,e.f)}function Sl(t){return t==null?mi:(yi||(yi=document.createElementNS("http://www.w3.org/2000/svg","g")),yi.setAttribute("transform",t),(t=yi.transform.baseVal.consolidate())?(t=t.matrix,Qa(t.a,t.b,t.c,t.d,t.e,t.f)):mi)}function xl(t,e,r,i){function a(f){return f.length?f.pop()+" ":""}function s(f,p,g,_,S,v){if(f!==g||p!==_){var C=S.push("translate(",null,e,null,r);v.push({i:C-4,x:ve(f,g)},{i:C-2,x:ve(p,_)})}else(g||_)&&S.push("translate("+g+e+_+r)}function l(f,p,g,_){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),_.push({i:g.push(a(g)+"rotate(",null,i)-2,x:ve(f,p)})):p&&g.push(a(g)+"rotate("+p+i)}function c(f,p,g,_){f!==p?_.push({i:g.push(a(g)+"skewX(",null,i)-2,x:ve(f,p)}):p&&g.push(a(g)+"skewX("+p+i)}function d(f,p,g,_,S,v){if(f!==g||p!==_){var C=S.push(a(S)+"scale(",null,",",null,")");v.push({i:C-4,x:ve(f,g)},{i:C-2,x:ve(p,_)})}else(g!==1||_!==1)&&S.push(a(S)+"scale("+g+","+_+")")}return function(f,p){var g=[],_=[];return f=t(f),p=t(p),s(f.translateX,f.translateY,p.translateX,p.translateY,g,_),l(f.rotate,p.rotate,g,_),c(f.skewX,p.skewX,g,_),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,g,_),f=p=null,function(S){for(var v=-1,C=_.length,P;++v<C;)g[(P=_[v]).i]=P.x(S);return g.join("")}}}var Xa=xl(wl,"px, ","px)","deg)"),Ka=xl(Sl,", ",")",")");var gr=0,Xr=0,Qr=0,Rl=1e3,gi,Kr,bi=0,Dt=0,_i=0,Jr=typeof performance=="object"&&performance.now?performance:Date,Cl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function tn(){return Dt||(Cl(gp),Dt=Jr.now()+_i)}function gp(){Dt=0}function en(){this._call=this._time=this._next=null}en.prototype=vi.prototype={constructor:en,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?tn():+r)+(e==null?0:+e),!this._next&&Kr!==this&&(Kr?Kr._next=this:gi=this,Kr=this),this._call=t,this._time=r,Ja()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ja())}};function vi(t,e,r){var i=new en;return i.restart(t,e,r),i}function El(){tn(),++gr;for(var t=gi,e;t;)(e=Dt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--gr}function Tl(){Dt=(bi=Jr.now())+_i,gr=Xr=0;try{El()}finally{gr=0,_p(),Dt=0}}function bp(){var t=Jr.now(),e=t-bi;e>Rl&&(_i-=e,bi=t)}function _p(){for(var t,e=gi,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:gi=r);Kr=t,Ja(i)}function Ja(t){if(!gr){Xr&&(Xr=clearTimeout(Xr));var e=t-Dt;e>24?(t<1/0&&(Xr=setTimeout(Tl,t-Jr.now()-_i)),Qr&&(Qr=clearInterval(Qr))):(Qr||(bi=Jr.now(),Qr=setInterval(bp,Rl)),gr=1,Cl(Tl))}}function wi(t,e,r){var i=new en;return e=e==null?0:+e,i.restart(a=>{i.stop(),t(a+e)},e,r),i}var vp=Ma("start","end","cancel","interrupt"),wp=[],Pl=0,kl=1,xi=2,Si=3,Al=4,Ti=5,rn=6;function pt(t,e,r,i,a,s){var l=t.__transition;if(!l)t.__transition={};else if(r in l)return;Sp(t,r,{name:e,index:i,group:a,on:vp,tween:wp,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Pl})}function nn(t,e){var r=Q(t,e);if(r.state>Pl)throw new Error("too late; already scheduled");return r}function K(t,e){var r=Q(t,e);if(r.state>Si)throw new Error("too late; already running");return r}function Q(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function Sp(t,e,r){var i=t.__transition,a;i[e]=r,r.timer=vi(s,0,r.time);function s(f){r.state=kl,r.timer.restart(l,r.delay,r.time),r.delay<=f&&l(f-r.delay)}function l(f){var p,g,_,S;if(r.state!==kl)return d();for(p in i)if(S=i[p],S.name===r.name){if(S.state===Si)return wi(l);S.state===Al?(S.state=rn,S.timer.stop(),S.on.call("interrupt",t,t.__data__,S.index,S.group),delete i[p]):+p<e&&(S.state=rn,S.timer.stop(),S.on.call("cancel",t,t.__data__,S.index,S.group),delete i[p])}if(wi(function(){r.state===Si&&(r.state=Al,r.timer.restart(c,r.delay,r.time),c(f))}),r.state=xi,r.on.call("start",t,t.__data__,r.index,r.group),r.state===xi){for(r.state=Si,a=new Array(_=r.tween.length),p=0,g=-1;p<_;++p)(S=r.tween[p].value.call(t,t.__data__,r.index,r.group))&&(a[++g]=S);a.length=g+1}}function c(f){for(var p=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=Ti,1),g=-1,_=a.length;++g<_;)a[g].call(t,p);r.state===Ti&&(r.on.call("end",t,t.__data__,r.index,r.group),d())}function d(){r.state=rn,r.timer.stop(),delete i[e];for(var f in i)return;delete t.__transition}}function Ri(t,e){var r=t.__transition,i,a,s=!0,l;if(r){e=e==null?null:e+"";for(l in r){if((i=r[l]).name!==e){s=!1;continue}a=i.state>xi&&i.state<Ti,i.state=rn,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[l]}s&&delete t.__transition}}function Ol(t){return this.each(function(){Ri(this,t)})}function xp(t,e){var r,i;return function(){var a=K(this,t),s=a.tween;if(s!==r){i=r=s;for(var l=0,c=i.length;l<c;++l)if(i[l].name===e){i=i.slice(),i.splice(l,1);break}}a.tween=i}}function Tp(t,e,r){var i,a;if(typeof r!="function")throw new Error;return function(){var s=K(this,t),l=s.tween;if(l!==i){a=(i=l).slice();for(var c={name:e,value:r},d=0,f=a.length;d<f;++d)if(a[d].name===e){a[d]=c;break}d===f&&a.push(c)}s.tween=a}}function Il(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=Q(this.node(),r).tween,a=0,s=i.length,l;a<s;++a)if((l=i[a]).name===t)return l.value;return null}return this.each((e==null?xp:Tp)(r,t,e))}function br(t,e,r){var i=t._id;return t.each(function(){var a=K(this,i);(a.value||(a.value={}))[e]=r.apply(this,arguments)}),function(a){return Q(a,i).value[e]}}function Ci(t,e){var r;return(typeof e=="number"?ve:e instanceof ht?pi:(r=ht(e))?(e=r,pi):Ga)(t,e)}function Rp(t){return function(){this.removeAttribute(t)}}function Cp(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ep(t,e,r){var i,a=r+"",s;return function(){var l=this.getAttribute(t);return l===a?null:l===i?s:s=e(i=l,r)}}function kp(t,e,r){var i,a=r+"",s;return function(){var l=this.getAttributeNS(t.space,t.local);return l===a?null:l===i?s:s=e(i=l,r)}}function Ap(t,e,r){var i,a,s;return function(){var l,c=r(this),d;return c==null?void this.removeAttribute(t):(l=this.getAttribute(t),d=c+"",l===d?null:l===i&&d===a?s:(a=d,s=e(i=l,c)))}}function Pp(t,e,r){var i,a,s;return function(){var l,c=r(this),d;return c==null?void this.removeAttributeNS(t.space,t.local):(l=this.getAttributeNS(t.space,t.local),d=c+"",l===d?null:l===i&&d===a?s:(a=d,s=e(i=l,c)))}}function Bl(t,e){var r=Ye(t),i=r==="transform"?Ka:Ci;return this.attrTween(t,typeof e=="function"?(r.local?Pp:Ap)(r,i,br(this,"attr."+t,e)):e==null?(r.local?Cp:Rp)(r):(r.local?kp:Ep)(r,i,e))}function Op(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Ip(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Bp(t,e){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Ip(t,s)),r}return a._value=e,a}function Np(t,e){var r,i;function a(){var s=e.apply(this,arguments);return s!==i&&(r=(i=s)&&Op(t,s)),r}return a._value=e,a}function Nl(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Ye(t);return this.tween(r,(i.local?Bp:Np)(i,e))}function Dp(t,e){return function(){nn(this,t).delay=+e.apply(this,arguments)}}function qp(t,e){return e=+e,function(){nn(this,t).delay=e}}function Dl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Dp:qp)(e,t)):Q(this.node(),e).delay}function Fp(t,e){return function(){K(this,t).duration=+e.apply(this,arguments)}}function zp(t,e){return e=+e,function(){K(this,t).duration=e}}function ql(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Fp:zp)(e,t)):Q(this.node(),e).duration}function Mp(t,e){if(typeof e!="function")throw new Error;return function(){K(this,t).ease=e}}function Fl(t){var e=this._id;return arguments.length?this.each(Mp(e,t)):Q(this.node(),e).ease}function $p(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;K(this,t).ease=r}}function zl(t){if(typeof t!="function")throw new Error;return this.each($p(this._id,t))}function Ml(t){typeof t!="function"&&(t=Vr(t));for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a)for(var s=e[a],l=s.length,c=i[a]=[],d,f=0;f<l;++f)(d=s[f])&&t.call(d,d.__data__,f,s)&&c.push(d);return new re(i,this._parents,this._name,this._id)}function $l(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,a=r.length,s=Math.min(i,a),l=new Array(i),c=0;c<s;++c)for(var d=e[c],f=r[c],p=d.length,g=l[c]=new Array(p),_,S=0;S<p;++S)(_=d[S]||f[S])&&(g[S]=_);for(;c<i;++c)l[c]=e[c];return new re(l,this._parents,this._name,this._id)}function Lp(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Wp(t,e,r){var i,a,s=Lp(e)?nn:K;return function(){var l=s(this,t),c=l.on;c!==i&&(a=(i=c).copy()).on(e,r),l.on=a}}function Ll(t,e){var r=this._id;return arguments.length<2?Q(this.node(),r).on.on(t):this.each(Wp(r,t,e))}function jp(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Wl(){return this.on("end.remove",jp(this._id))}function jl(t){var e=this._name,r=this._id;typeof t!="function"&&(t=It(t));for(var i=this._groups,a=i.length,s=new Array(a),l=0;l<a;++l)for(var c=i[l],d=c.length,f=s[l]=new Array(d),p,g,_=0;_<d;++_)(p=c[_])&&(g=t.call(p,p.__data__,_,c))&&("__data__"in p&&(g.__data__=p.__data__),f[_]=g,pt(f[_],e,r,_,f,Q(p,r)));return new re(s,this._parents,e,r)}function Ul(t){var e=this._name,r=this._id;typeof t!="function"&&(t=Ur(t));for(var i=this._groups,a=i.length,s=[],l=[],c=0;c<a;++c)for(var d=i[c],f=d.length,p,g=0;g<f;++g)if(p=d[g]){for(var _=t.call(p,p.__data__,g,d),S,v=Q(p,r),C=0,P=_.length;C<P;++C)(S=_[C])&&pt(S,e,r,C,_,v);s.push(_),l.push(p)}return new re(s,l,e,r)}var Up=Ge.prototype.constructor;function Vl(){return new Up(this._groups,this._parents)}function Vp(t,e){var r,i,a;return function(){var s=dt(this,t),l=(this.style.removeProperty(t),dt(this,t));return s===l?null:s===r&&l===i?a:a=e(r=s,i=l)}}function Hl(t){return function(){this.style.removeProperty(t)}}function Hp(t,e,r){var i,a=r+"",s;return function(){var l=dt(this,t);return l===a?null:l===i?s:s=e(i=l,r)}}function Zp(t,e,r){var i,a,s;return function(){var l=dt(this,t),c=r(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(t),dt(this,t))),l===d?null:l===i&&d===a?s:(a=d,s=e(i=l,c))}}function Yp(t,e){var r,i,a,s="style."+e,l="end."+s,c;return function(){var d=K(this,t),f=d.on,p=d.value[s]==null?c||(c=Hl(e)):void 0;(f!==r||a!==p)&&(i=(r=f).copy()).on(l,a=p),d.on=i}}function Zl(t,e,r){var i=(t+="")=="transform"?Xa:Ci;return e==null?this.styleTween(t,Vp(t,i)).on("end.style."+t,Hl(t)):typeof e=="function"?this.styleTween(t,Zp(t,i,br(this,"style."+t,e))).each(Yp(this._id,t)):this.styleTween(t,Hp(t,i,e),r).on("end.style."+t,null)}function Gp(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function Qp(t,e,r){var i,a;function s(){var l=e.apply(this,arguments);return l!==a&&(i=(a=l)&&Gp(t,l,r)),i}return s._value=e,s}function Yl(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Qp(t,e,r??""))}function Xp(t){return function(){this.textContent=t}}function Kp(t){return function(){var e=t(this);this.textContent=e??""}}function Gl(t){return this.tween("text",typeof t=="function"?Kp(br(this,"text",t)):Xp(t==null?"":t+""))}function Jp(t){return function(e){this.textContent=t.call(this,e)}}function em(t){var e,r;function i(){var a=t.apply(this,arguments);return a!==r&&(e=(r=a)&&Jp(a)),e}return i._value=t,i}function Ql(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,em(t))}function Xl(){for(var t=this._name,e=this._id,r=Ei(),i=this._groups,a=i.length,s=0;s<a;++s)for(var l=i[s],c=l.length,d,f=0;f<c;++f)if(d=l[f]){var p=Q(d,e);pt(d,t,r,f,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new re(i,this._parents,t,r)}function Kl(){var t,e,r=this,i=r._id,a=r.size();return new Promise(function(s,l){var c={value:l},d={value:function(){--a===0&&s()}};r.each(function(){var f=K(this,i),p=f.on;p!==t&&(e=(t=p).copy(),e._.cancel.push(c),e._.interrupt.push(c),e._.end.push(d)),f.on=e}),a===0&&s()})}var tm=0;function re(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function Jl(t){return Ge().transition(t)}function Ei(){return++tm}var Qe=Ge.prototype;re.prototype=Jl.prototype={constructor:re,select:jl,selectAll:Ul,selectChild:Qe.selectChild,selectChildren:Qe.selectChildren,filter:Ml,merge:$l,selection:Vl,transition:Xl,call:Qe.call,nodes:Qe.nodes,node:Qe.node,size:Qe.size,empty:Qe.empty,each:Qe.each,on:Ll,attr:Bl,attrTween:Nl,style:Zl,styleTween:Yl,text:Gl,textTween:Ql,remove:Wl,tween:Il,delay:Dl,duration:ql,ease:Fl,easeVarying:zl,end:Kl,[Symbol.iterator]:Qe[Symbol.iterator]};function ki(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var rm={time:null,delay:0,duration:250,ease:ki};function nm(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function ec(t){var e,r;t instanceof re?(e=t._id,t=t._name):(e=Ei(),(r=rm).time=tn(),t=t==null?null:t+"");for(var i=this._groups,a=i.length,s=0;s<a;++s)for(var l=i[s],c=l.length,d,f=0;f<c;++f)(d=l[f])&&pt(d,t,e,f,l,r||nm(d,e));return new re(i,this._parents,t,e)}Ge.prototype.interrupt=Ol;Ge.prototype.transition=ec;var{abs:W0,max:j0,min:U0}=Math;function tc(t){return[+t[0],+t[1]]}function im(t){return[tc(t[0]),tc(t[1])]}var V0={name:"x",handles:["w","e"].map(eo),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},H0={name:"y",handles:["n","s"].map(eo),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Z0={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(eo),input:function(t){return t==null?null:im(t)},output:function(t){return t}};function eo(t){return{type:t}}var rc={},to={},ro=34,an=10,no=13;function ic(t){return new Function("d","return {"+t.map(function(e,r){return JSON.stringify(e)+": d["+r+'] || ""'}).join(",")+"}")}function am(t,e){var r=ic(t);return function(i,a){return e(r(i),a,t)}}function nc(t){var e=Object.create(null),r=[];return t.forEach(function(i){for(var a in i)a in e||r.push(e[a]=a)}),r}function ue(t,e){var r=t+"",i=r.length;return i<e?new Array(e-i+1).join(0)+r:r}function om(t){return t<0?"-"+ue(-t,6):t>9999?"+"+ue(t,6):ue(t,4)}function sm(t){var e=t.getUTCHours(),r=t.getUTCMinutes(),i=t.getUTCSeconds(),a=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":om(t.getUTCFullYear(),4)+"-"+ue(t.getUTCMonth()+1,2)+"-"+ue(t.getUTCDate(),2)+(a?"T"+ue(e,2)+":"+ue(r,2)+":"+ue(i,2)+"."+ue(a,3)+"Z":i?"T"+ue(e,2)+":"+ue(r,2)+":"+ue(i,2)+"Z":r||e?"T"+ue(e,2)+":"+ue(r,2)+"Z":"")}function ac(t){var e=new RegExp('["'+t+`
\r]`),r=t.charCodeAt(0);function i(g,_){var S,v,C=a(g,function(P,N){if(S)return S(P,N-1);v=P,S=_?am(P,_):ic(P)});return C.columns=v||[],C}function a(g,_){var S=[],v=g.length,C=0,P=0,N,W=v<=0,U=!1;g.charCodeAt(v-1)===an&&--v,g.charCodeAt(v-1)===no&&--v;function $(){if(W)return to;if(U)return U=!1,rc;var V,ce=C,Te;if(g.charCodeAt(ce)===ro){for(;C++<v&&g.charCodeAt(C)!==ro||g.charCodeAt(++C)===ro;);return(V=C)>=v?W=!0:(Te=g.charCodeAt(C++))===an?U=!0:Te===no&&(U=!0,g.charCodeAt(C)===an&&++C),g.slice(ce+1,V-1).replace(/""/g,'"')}for(;C<v;){if((Te=g.charCodeAt(V=C++))===an)U=!0;else if(Te===no)U=!0,g.charCodeAt(C)===an&&++C;else if(Te!==r)continue;return g.slice(ce,V)}return W=!0,g.slice(ce,v)}for(;(N=$())!==to;){for(var M=[];N!==rc&&N!==to;)M.push(N),N=$();_&&(M=_(M,P++))==null||S.push(M)}return S}function s(g,_){return g.map(function(S){return _.map(function(v){return p(S[v])}).join(t)})}function l(g,_){return _==null&&(_=nc(g)),[_.map(p).join(t)].concat(s(g,_)).join(`
`)}function c(g,_){return _==null&&(_=nc(g)),s(g,_).join(`
`)}function d(g){return g.map(f).join(`
`)}function f(g){return g.map(p).join(t)}function p(g){return g==null?"":g instanceof Date?sm(g):e.test(g+="")?'"'+g.replace(/"/g,'""')+'"':g}return{parse:i,parseRows:a,format:l,formatBody:c,formatRows:d,formatRow:f,formatValue:p}}var qt=ac(","),io=qt.parse,um=qt.parseRows,Ai=qt.format,lm=qt.formatBody,cm=qt.formatRows,fm=qt.formatRow,dm=qt.formatValue;function Pi(t){for(var e in t){var r=t[e].trim(),i,a;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(i=+r))r=i;else if(a=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))hm&&a[4]&&!a[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;t[e]=r}return t}var hm=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function mt(t,e,r){this.k=t,this.x=e,this.y=r}mt.prototype={constructor:mt,scale:function(t){return t===1?this:new mt(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new mt(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ao=new mt(1,0,0);oo.prototype=mt.prototype;function oo(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ao;return t.__zoom}var j;(function(t){t.assertEqual=a=>a;function e(a){}t.assertIs=e;function r(a){throw new Error}t.assertNever=r,t.arrayToEnum=a=>{let s={};for(let l of a)s[l]=l;return s},t.getValidEnumValues=a=>{let s=t.objectKeys(a).filter(c=>typeof a[a[c]]!="number"),l={};for(let c of s)l[c]=a[c];return t.objectValues(l)},t.objectValues=a=>t.objectKeys(a).map(function(s){return a[s]}),t.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{let s=[];for(let l in a)Object.prototype.hasOwnProperty.call(a,l)&&s.push(l);return s},t.find=(a,s)=>{for(let l of a)if(s(l))return l},t.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function i(a,s=" | "){return a.map(l=>typeof l=="string"?`'${l}'`:l).join(s)}t.joinValues=i,t.jsonStringifyReplacer=(a,s)=>typeof s=="bigint"?s.toString():s})(j||(j={}));var uo;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(uo||(uo={}));var R=j.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),yt=t=>{switch(typeof t){case"undefined":return R.undefined;case"string":return R.string;case"number":return isNaN(t)?R.nan:R.number;case"boolean":return R.boolean;case"function":return R.function;case"bigint":return R.bigint;case"symbol":return R.symbol;case"object":return Array.isArray(t)?R.array:t===null?R.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?R.promise:typeof Map<"u"&&t instanceof Map?R.map:typeof Set<"u"&&t instanceof Set?R.set:typeof Date<"u"&&t instanceof Date?R.date:R.object;default:return R.unknown}},w=j.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),pm=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),he=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(s){return s.message},i={_errors:[]},a=s=>{for(let l of s.issues)if(l.code==="invalid_union")l.unionErrors.map(a);else if(l.code==="invalid_return_type")a(l.returnTypeError);else if(l.code==="invalid_arguments")a(l.argumentsError);else if(l.path.length===0)i._errors.push(r(l));else{let c=i,d=0;for(;d<l.path.length;){let f=l.path[d];d===l.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(r(l))):c[f]=c[f]||{_errors:[]},c=c[f],d++}}};return a(this),i}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,j.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},i=[];for(let a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(e(a))):i.push(e(a));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}};he.create=t=>new he(t);var wr=(t,e)=>{let r;switch(t.code){case w.invalid_type:t.received===R.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case w.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,j.jsonStringifyReplacer)}`;break;case w.unrecognized_keys:r=`Unrecognized key(s) in object: ${j.joinValues(t.keys,", ")}`;break;case w.invalid_union:r="Invalid input";break;case w.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${j.joinValues(t.options)}`;break;case w.invalid_enum_value:r=`Invalid enum value. Expected ${j.joinValues(t.options)}, received '${t.received}'`;break;case w.invalid_arguments:r="Invalid function arguments";break;case w.invalid_return_type:r="Invalid function return type";break;case w.invalid_date:r="Invalid date";break;case w.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:j.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case w.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case w.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case w.custom:r="Invalid input";break;case w.invalid_intersection_types:r="Intersection results could not be merged";break;case w.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case w.not_finite:r="Number must be finite";break;default:r=e.defaultError,j.assertNever(t)}return{message:r}},uc=wr;function mm(t){uc=t}function Oi(){return uc}var Ii=t=>{let{data:e,path:r,errorMaps:i,issueData:a}=t,s=[...r,...a.path||[]],l={...a,path:s};if(a.message!==void 0)return{...a,path:s,message:a.message};let c="",d=i.filter(f=>!!f).slice().reverse();for(let f of d)c=f(l,{data:e,defaultError:c}).message;return{...a,path:s,message:c}},ym=[];function x(t,e){let r=Oi(),i=Ii({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===wr?void 0:wr].filter(a=>!!a)});t.common.issues.push(i)}var ee=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let i=[];for(let a of r){if(a.status==="aborted")return I;a.status==="dirty"&&e.dirty(),i.push(a.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,r){let i=[];for(let a of r){let s=await a.key,l=await a.value;i.push({key:s,value:l})}return t.mergeObjectSync(e,i)}static mergeObjectSync(e,r){let i={};for(let a of r){let{key:s,value:l}=a;if(s.status==="aborted"||l.status==="aborted")return I;s.status==="dirty"&&e.dirty(),l.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof l.value<"u"||a.alwaysSet)&&(i[s.value]=l.value)}return{status:e.value,value:i}}},I=Object.freeze({status:"aborted"}),vr=t=>({status:"dirty",value:t}),ne=t=>({status:"valid",value:t}),lo=t=>t.status==="aborted",co=t=>t.status==="dirty",un=t=>t.status==="valid",ln=t=>typeof Promise<"u"&&t instanceof Promise;function Bi(t,e,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(t):i?i.value:e.get(t)}function lc(t,e,r,i,a){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?a.call(t,r):a?a.value=r:e.set(t,r),r}var E;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(E||(E={}));var on,sn,Se=class{constructor(e,r,i,a){this._cachedPath=[],this.parent=e,this.data=r,this._path=i,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},oc=(t,e)=>{if(un(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new he(t.common.issues);return this._error=r,this._error}}};function q(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:i,description:a}=t;if(e&&(r||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:a}:{errorMap:(l,c)=>{var d,f;let{message:p}=t;return l.code==="invalid_enum_value"?{message:p??c.defaultError}:typeof c.data>"u"?{message:(d=p??i)!==null&&d!==void 0?d:c.defaultError}:l.code!=="invalid_type"?{message:c.defaultError}:{message:(f=p??r)!==null&&f!==void 0?f:c.defaultError}},description:a}}var F=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return yt(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:yt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ee,ctx:{common:e.parent.common,data:e.data,parsedType:yt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(ln(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let i=this.safeParse(e,r);if(i.success)return i.data;throw i.error}safeParse(e,r){var i;let a={common:{issues:[],async:(i=r?.async)!==null&&i!==void 0?i:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yt(e)},s=this._parseSync({data:e,path:a.path,parent:a});return oc(a,s)}async parseAsync(e,r){let i=await this.safeParseAsync(e,r);if(i.success)return i.data;throw i.error}async safeParseAsync(e,r){let i={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:yt(e)},a=this._parse({data:e,path:i.path,parent:i}),s=await(ln(a)?a:Promise.resolve(a));return oc(i,s)}refine(e,r){let i=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,s)=>{let l=e(a),c=()=>s.addIssue({code:w.custom,...i(a)});return typeof Promise<"u"&&l instanceof Promise?l.then(d=>d?!0:(c(),!1)):l?!0:(c(),!1)})}refinement(e,r){return this._refinement((i,a)=>e(i)?!0:(a.addIssue(typeof r=="function"?r(i,a):r),!1))}_refinement(e){return new pe({schema:this,typeName:O.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return we.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Je.create(this,this._def)}promise(){return _t.create(this,this._def)}or(e){return jt.create([this,e],this._def)}and(e){return Ut.create(this,e,this._def)}transform(e){return new pe({...q(this._def),schema:this,typeName:O.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Gt({...q(this._def),innerType:this,defaultValue:r,typeName:O.ZodDefault})}brand(){return new cn({typeName:O.ZodBranded,type:this,...q(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Qt({...q(this._def),innerType:this,catchValue:r,typeName:O.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return fn.create(this,e)}readonly(){return Xt.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},gm=/^c[^\s-]{8,}$/i,bm=/^[0-9a-z]+$/,_m=/^[0-9A-HJKMNP-TV-Z]{26}$/,vm=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wm=/^[a-z0-9_-]{21}$/i,Sm=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,xm=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,Tm="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",so,Rm=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Cm=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,Em=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,cc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",km=new RegExp(`^${cc}$`);function fc(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function Am(t){return new RegExp(`^${fc(t)}$`)}function dc(t){let e=`${cc}T${fc(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Pm(t,e){return!!((e==="v4"||!e)&&Rm.test(t)||(e==="v6"||!e)&&Cm.test(t))}var gt=class t extends F{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==R.string){let s=this._getOrReturnCtx(e);return x(s,{code:w.invalid_type,expected:R.string,received:s.parsedType}),I}let i=new ee,a;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:w.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="max")e.data.length>s.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:w.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),i.dirty());else if(s.kind==="length"){let l=e.data.length>s.value,c=e.data.length<s.value;(l||c)&&(a=this._getOrReturnCtx(e,a),l?x(a,{code:w.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&x(a,{code:w.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),i.dirty())}else if(s.kind==="email")xm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"email",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="emoji")so||(so=new RegExp(Tm,"u")),so.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"emoji",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="uuid")vm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"uuid",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="nanoid")wm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"nanoid",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid")gm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"cuid",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="cuid2")bm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"cuid2",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="ulid")_m.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"ulid",code:w.invalid_string,message:s.message}),i.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{a=this._getOrReturnCtx(e,a),x(a,{validation:"url",code:w.invalid_string,message:s.message}),i.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"regex",code:w.invalid_string,message:s.message}),i.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),i.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:{startsWith:s.value},message:s.message}),i.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:{endsWith:s.value},message:s.message}),i.dirty()):s.kind==="datetime"?dc(s).test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:"datetime",message:s.message}),i.dirty()):s.kind==="date"?km.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:"date",message:s.message}),i.dirty()):s.kind==="time"?Am(s).test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{code:w.invalid_string,validation:"time",message:s.message}),i.dirty()):s.kind==="duration"?Sm.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"duration",code:w.invalid_string,message:s.message}),i.dirty()):s.kind==="ip"?Pm(e.data,s.version)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"ip",code:w.invalid_string,message:s.message}),i.dirty()):s.kind==="base64"?Em.test(e.data)||(a=this._getOrReturnCtx(e,a),x(a,{validation:"base64",code:w.invalid_string,message:s.message}),i.dirty()):j.assertNever(s);return{status:i.value,value:e.data}}_regex(e,r,i){return this.refinement(a=>e.test(a),{validation:r,code:w.invalid_string,...E.errToObj(i)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...E.errToObj(e)})}url(e){return this._addCheck({kind:"url",...E.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...E.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...E.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...E.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...E.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...E.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...E.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...E.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...E.errToObj(e)})}datetime(e){var r,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(i=e?.local)!==null&&i!==void 0?i:!1,...E.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...E.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...E.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...E.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...E.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...E.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...E.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...E.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...E.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...E.errToObj(r)})}nonempty(e){return this.min(1,E.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};gt.create=t=>{var e;return new gt({checks:[],typeName:O.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...q(t)})};function Om(t,e){let r=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,a=r>i?r:i,s=parseInt(t.toFixed(a).replace(".","")),l=parseInt(e.toFixed(a).replace(".",""));return s%l/Math.pow(10,a)}var Ft=class t extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==R.number){let s=this._getOrReturnCtx(e);return x(s,{code:w.invalid_type,expected:R.number,received:s.parsedType}),I}let i,a=new ee;for(let s of this._def.checks)s.kind==="int"?j.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{code:w.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty()):s.kind==="multipleOf"?Om(e.data,s.value)!==0&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),x(i,{code:w.not_finite,message:s.message}),a.dirty()):j.assertNever(s);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,E.toString(r))}gt(e,r){return this.setLimit("min",e,!1,E.toString(r))}lte(e,r){return this.setLimit("max",e,!0,E.toString(r))}lt(e,r){return this.setLimit("max",e,!1,E.toString(r))}setLimit(e,r,i,a){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:i,message:E.toString(a)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:E.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:E.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:E.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:E.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:E.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&j.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(r===null||i.value>r)&&(r=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(r)&&Number.isFinite(e)}};Ft.create=t=>new Ft({checks:[],typeName:O.ZodNumber,coerce:t?.coerce||!1,...q(t)});var zt=class t extends F{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==R.bigint){let s=this._getOrReturnCtx(e);return x(s,{code:w.invalid_type,expected:R.bigint,received:s.parsedType}),I}let i,a=new ee;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),x(i,{code:w.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):j.assertNever(s);return{status:a.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,E.toString(r))}gt(e,r){return this.setLimit("min",e,!1,E.toString(r))}lte(e,r){return this.setLimit("max",e,!0,E.toString(r))}lt(e,r){return this.setLimit("max",e,!1,E.toString(r))}setLimit(e,r,i,a){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:i,message:E.toString(a)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:E.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:E.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:E.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:E.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:E.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};zt.create=t=>{var e;return new zt({checks:[],typeName:O.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...q(t)})};var Mt=class extends F{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==R.boolean){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.boolean,received:i.parsedType}),I}return ne(e.data)}};Mt.create=t=>new Mt({typeName:O.ZodBoolean,coerce:t?.coerce||!1,...q(t)});var $t=class t extends F{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==R.date){let s=this._getOrReturnCtx(e);return x(s,{code:w.invalid_type,expected:R.date,received:s.parsedType}),I}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return x(s,{code:w.invalid_date}),I}let i=new ee,a;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:w.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),i.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),x(a,{code:w.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),i.dirty()):j.assertNever(s);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:E.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:E.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};$t.create=t=>new $t({checks:[],coerce:t?.coerce||!1,typeName:O.ZodDate,...q(t)});var Sr=class extends F{_parse(e){if(this._getType(e)!==R.symbol){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.symbol,received:i.parsedType}),I}return ne(e.data)}};Sr.create=t=>new Sr({typeName:O.ZodSymbol,...q(t)});var Lt=class extends F{_parse(e){if(this._getType(e)!==R.undefined){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.undefined,received:i.parsedType}),I}return ne(e.data)}};Lt.create=t=>new Lt({typeName:O.ZodUndefined,...q(t)});var Wt=class extends F{_parse(e){if(this._getType(e)!==R.null){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.null,received:i.parsedType}),I}return ne(e.data)}};Wt.create=t=>new Wt({typeName:O.ZodNull,...q(t)});var bt=class extends F{constructor(){super(...arguments),this._any=!0}_parse(e){return ne(e.data)}};bt.create=t=>new bt({typeName:O.ZodAny,...q(t)});var Ke=class extends F{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ne(e.data)}};Ke.create=t=>new Ke({typeName:O.ZodUnknown,...q(t)});var Pe=class extends F{_parse(e){let r=this._getOrReturnCtx(e);return x(r,{code:w.invalid_type,expected:R.never,received:r.parsedType}),I}};Pe.create=t=>new Pe({typeName:O.ZodNever,...q(t)});var xr=class extends F{_parse(e){if(this._getType(e)!==R.undefined){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.void,received:i.parsedType}),I}return ne(e.data)}};xr.create=t=>new xr({typeName:O.ZodVoid,...q(t)});var Je=class t extends F{_parse(e){let{ctx:r,status:i}=this._processInputParams(e),a=this._def;if(r.parsedType!==R.array)return x(r,{code:w.invalid_type,expected:R.array,received:r.parsedType}),I;if(a.exactLength!==null){let l=r.data.length>a.exactLength.value,c=r.data.length<a.exactLength.value;(l||c)&&(x(r,{code:l?w.too_big:w.too_small,minimum:c?a.exactLength.value:void 0,maximum:l?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),i.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(x(r,{code:w.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),i.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(x(r,{code:w.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((l,c)=>a.type._parseAsync(new Se(r,l,r.path,c)))).then(l=>ee.mergeArray(i,l));let s=[...r.data].map((l,c)=>a.type._parseSync(new Se(r,l,r.path,c)));return ee.mergeArray(i,s)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:E.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:E.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:E.toString(r)}})}nonempty(e){return this.min(1,e)}};Je.create=(t,e)=>new Je({type:t,minLength:null,maxLength:null,exactLength:null,typeName:O.ZodArray,...q(e)});function _r(t){if(t instanceof le){let e={};for(let r in t.shape){let i=t.shape[r];e[r]=we.create(_r(i))}return new le({...t._def,shape:()=>e})}else return t instanceof Je?new Je({...t._def,type:_r(t.element)}):t instanceof we?we.create(_r(t.unwrap())):t instanceof Fe?Fe.create(_r(t.unwrap())):t instanceof qe?qe.create(t.items.map(e=>_r(e))):t}var le=class t extends F{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=j.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==R.object){let f=this._getOrReturnCtx(e);return x(f,{code:w.invalid_type,expected:R.object,received:f.parsedType}),I}let{status:i,ctx:a}=this._processInputParams(e),{shape:s,keys:l}=this._getCached(),c=[];if(!(this._def.catchall instanceof Pe&&this._def.unknownKeys==="strip"))for(let f in a.data)l.includes(f)||c.push(f);let d=[];for(let f of l){let p=s[f],g=a.data[f];d.push({key:{status:"valid",value:f},value:p._parse(new Se(a,g,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Pe){let f=this._def.unknownKeys;if(f==="passthrough")for(let p of c)d.push({key:{status:"valid",value:p},value:{status:"valid",value:a.data[p]}});else if(f==="strict")c.length>0&&(x(a,{code:w.unrecognized_keys,keys:c}),i.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let f=this._def.catchall;for(let p of c){let g=a.data[p];d.push({key:{status:"valid",value:p},value:f._parse(new Se(a,g,a.path,p)),alwaysSet:p in a.data})}}return a.common.async?Promise.resolve().then(async()=>{let f=[];for(let p of d){let g=await p.key,_=await p.value;f.push({key:g,value:_,alwaysSet:p.alwaysSet})}return f}).then(f=>ee.mergeObjectSync(i,f)):ee.mergeObjectSync(i,d)}get shape(){return this._def.shape()}strict(e){return E.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,i)=>{var a,s,l,c;let d=(l=(s=(a=this._def).errorMap)===null||s===void 0?void 0:s.call(a,r,i).message)!==null&&l!==void 0?l:i.defaultError;return r.code==="unrecognized_keys"?{message:(c=E.errToObj(e).message)!==null&&c!==void 0?c:d}:{message:d}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:O.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return j.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(r[i]=this.shape[i])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return j.objectKeys(this.shape).forEach(i=>{e[i]||(r[i]=this.shape[i])}),new t({...this._def,shape:()=>r})}deepPartial(){return _r(this)}partial(e){let r={};return j.objectKeys(this.shape).forEach(i=>{let a=this.shape[i];e&&!e[i]?r[i]=a:r[i]=a.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return j.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])r[i]=this.shape[i];else{let s=this.shape[i];for(;s instanceof we;)s=s._def.innerType;r[i]=s}}),new t({...this._def,shape:()=>r})}keyof(){return hc(j.objectKeys(this.shape))}};le.create=(t,e)=>new le({shape:()=>t,unknownKeys:"strip",catchall:Pe.create(),typeName:O.ZodObject,...q(e)});le.strictCreate=(t,e)=>new le({shape:()=>t,unknownKeys:"strict",catchall:Pe.create(),typeName:O.ZodObject,...q(e)});le.lazycreate=(t,e)=>new le({shape:t,unknownKeys:"strip",catchall:Pe.create(),typeName:O.ZodObject,...q(e)});var jt=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),i=this._def.options;function a(s){for(let c of s)if(c.result.status==="valid")return c.result;for(let c of s)if(c.result.status==="dirty")return r.common.issues.push(...c.ctx.common.issues),c.result;let l=s.map(c=>new he(c.ctx.common.issues));return x(r,{code:w.invalid_union,unionErrors:l}),I}if(r.common.async)return Promise.all(i.map(async s=>{let l={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:l}),ctx:l}})).then(a);{let s,l=[];for(let d of i){let f={...r,common:{...r.common,issues:[]},parent:null},p=d._parseSync({data:r.data,path:r.path,parent:f});if(p.status==="valid")return p;p.status==="dirty"&&!s&&(s={result:p,ctx:f}),f.common.issues.length&&l.push(f.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let c=l.map(d=>new he(d));return x(r,{code:w.invalid_union,unionErrors:c}),I}}get options(){return this._def.options}};jt.create=(t,e)=>new jt({options:t,typeName:O.ZodUnion,...q(e)});var Xe=t=>t instanceof Vt?Xe(t.schema):t instanceof pe?Xe(t.innerType()):t instanceof Ht?[t.value]:t instanceof Zt?t.options:t instanceof Yt?j.objectValues(t.enum):t instanceof Gt?Xe(t._def.innerType):t instanceof Lt?[void 0]:t instanceof Wt?[null]:t instanceof we?[void 0,...Xe(t.unwrap())]:t instanceof Fe?[null,...Xe(t.unwrap())]:t instanceof cn||t instanceof Xt?Xe(t.unwrap()):t instanceof Qt?Xe(t._def.innerType):[],Ni=class t extends F{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==R.object)return x(r,{code:w.invalid_type,expected:R.object,received:r.parsedType}),I;let i=this.discriminator,a=r.data[i],s=this.optionsMap.get(a);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(x(r,{code:w.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),I)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,i){let a=new Map;for(let s of r){let l=Xe(s.shape[e]);if(!l.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let c of l){if(a.has(c))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(c)}`);a.set(c,s)}}return new t({typeName:O.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:a,...q(i)})}};function fo(t,e){let r=yt(t),i=yt(e);if(t===e)return{valid:!0,data:t};if(r===R.object&&i===R.object){let a=j.objectKeys(e),s=j.objectKeys(t).filter(c=>a.indexOf(c)!==-1),l={...t,...e};for(let c of s){let d=fo(t[c],e[c]);if(!d.valid)return{valid:!1};l[c]=d.data}return{valid:!0,data:l}}else if(r===R.array&&i===R.array){if(t.length!==e.length)return{valid:!1};let a=[];for(let s=0;s<t.length;s++){let l=t[s],c=e[s],d=fo(l,c);if(!d.valid)return{valid:!1};a.push(d.data)}return{valid:!0,data:a}}else return r===R.date&&i===R.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var Ut=class extends F{_parse(e){let{status:r,ctx:i}=this._processInputParams(e),a=(s,l)=>{if(lo(s)||lo(l))return I;let c=fo(s.value,l.value);return c.valid?((co(s)||co(l))&&r.dirty(),{status:r.value,value:c.data}):(x(i,{code:w.invalid_intersection_types}),I)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([s,l])=>a(s,l)):a(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}};Ut.create=(t,e,r)=>new Ut({left:t,right:e,typeName:O.ZodIntersection,...q(r)});var qe=class t extends F{_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.array)return x(i,{code:w.invalid_type,expected:R.array,received:i.parsedType}),I;if(i.data.length<this._def.items.length)return x(i,{code:w.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),I;!this._def.rest&&i.data.length>this._def.items.length&&(x(i,{code:w.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...i.data].map((l,c)=>{let d=this._def.items[c]||this._def.rest;return d?d._parse(new Se(i,l,i.path,c)):null}).filter(l=>!!l);return i.common.async?Promise.all(s).then(l=>ee.mergeArray(r,l)):ee.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};qe.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new qe({items:t,typeName:O.ZodTuple,rest:null,...q(e)})};var Di=class t extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.object)return x(i,{code:w.invalid_type,expected:R.object,received:i.parsedType}),I;let a=[],s=this._def.keyType,l=this._def.valueType;for(let c in i.data)a.push({key:s._parse(new Se(i,c,i.path,c)),value:l._parse(new Se(i,i.data[c],i.path,c)),alwaysSet:c in i.data});return i.common.async?ee.mergeObjectAsync(r,a):ee.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(e,r,i){return r instanceof F?new t({keyType:e,valueType:r,typeName:O.ZodRecord,...q(i)}):new t({keyType:gt.create(),valueType:e,typeName:O.ZodRecord,...q(r)})}},Tr=class extends F{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.map)return x(i,{code:w.invalid_type,expected:R.map,received:i.parsedType}),I;let a=this._def.keyType,s=this._def.valueType,l=[...i.data.entries()].map(([c,d],f)=>({key:a._parse(new Se(i,c,i.path,[f,"key"])),value:s._parse(new Se(i,d,i.path,[f,"value"]))}));if(i.common.async){let c=new Map;return Promise.resolve().then(async()=>{for(let d of l){let f=await d.key,p=await d.value;if(f.status==="aborted"||p.status==="aborted")return I;(f.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(f.value,p.value)}return{status:r.value,value:c}})}else{let c=new Map;for(let d of l){let f=d.key,p=d.value;if(f.status==="aborted"||p.status==="aborted")return I;(f.status==="dirty"||p.status==="dirty")&&r.dirty(),c.set(f.value,p.value)}return{status:r.value,value:c}}}};Tr.create=(t,e,r)=>new Tr({valueType:e,keyType:t,typeName:O.ZodMap,...q(r)});var Rr=class t extends F{_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.parsedType!==R.set)return x(i,{code:w.invalid_type,expected:R.set,received:i.parsedType}),I;let a=this._def;a.minSize!==null&&i.data.size<a.minSize.value&&(x(i,{code:w.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&i.data.size>a.maxSize.value&&(x(i,{code:w.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());let s=this._def.valueType;function l(d){let f=new Set;for(let p of d){if(p.status==="aborted")return I;p.status==="dirty"&&r.dirty(),f.add(p.value)}return{status:r.value,value:f}}let c=[...i.data.values()].map((d,f)=>s._parse(new Se(i,d,i.path,f)));return i.common.async?Promise.all(c).then(d=>l(d)):l(c)}min(e,r){return new t({...this._def,minSize:{value:e,message:E.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:E.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Rr.create=(t,e)=>new Rr({valueType:t,minSize:null,maxSize:null,typeName:O.ZodSet,...q(e)});var qi=class t extends F{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==R.function)return x(r,{code:w.invalid_type,expected:R.function,received:r.parsedType}),I;function i(c,d){return Ii({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Oi(),wr].filter(f=>!!f),issueData:{code:w.invalid_arguments,argumentsError:d}})}function a(c,d){return Ii({data:c,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Oi(),wr].filter(f=>!!f),issueData:{code:w.invalid_return_type,returnTypeError:d}})}let s={errorMap:r.common.contextualErrorMap},l=r.data;if(this._def.returns instanceof _t){let c=this;return ne(async function(...d){let f=new he([]),p=await c._def.args.parseAsync(d,s).catch(S=>{throw f.addIssue(i(d,S)),f}),g=await Reflect.apply(l,this,p);return await c._def.returns._def.type.parseAsync(g,s).catch(S=>{throw f.addIssue(a(g,S)),f})})}else{let c=this;return ne(function(...d){let f=c._def.args.safeParse(d,s);if(!f.success)throw new he([i(d,f.error)]);let p=Reflect.apply(l,this,f.data),g=c._def.returns.safeParse(p,s);if(!g.success)throw new he([a(p,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:qe.create(e).rest(Ke.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,i){return new t({args:e||qe.create([]).rest(Ke.create()),returns:r||Ke.create(),typeName:O.ZodFunction,...q(i)})}},Vt=class extends F{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};Vt.create=(t,e)=>new Vt({getter:t,typeName:O.ZodLazy,...q(e)});var Ht=class extends F{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return x(r,{received:r.data,code:w.invalid_literal,expected:this._def.value}),I}return{status:"valid",value:e.data}}get value(){return this._def.value}};Ht.create=(t,e)=>new Ht({value:t,typeName:O.ZodLiteral,...q(e)});function hc(t,e){return new Zt({values:t,typeName:O.ZodEnum,...q(e)})}var Zt=class t extends F{constructor(){super(...arguments),on.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),i=this._def.values;return x(r,{expected:j.joinValues(i),received:r.parsedType,code:w.invalid_type}),I}if(Bi(this,on,"f")||lc(this,on,new Set(this._def.values),"f"),!Bi(this,on,"f").has(e.data)){let r=this._getOrReturnCtx(e),i=this._def.values;return x(r,{received:r.data,code:w.invalid_enum_value,options:i}),I}return ne(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(i=>!e.includes(i)),{...this._def,...r})}};on=new WeakMap;Zt.create=hc;var Yt=class extends F{constructor(){super(...arguments),sn.set(this,void 0)}_parse(e){let r=j.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==R.string&&i.parsedType!==R.number){let a=j.objectValues(r);return x(i,{expected:j.joinValues(a),received:i.parsedType,code:w.invalid_type}),I}if(Bi(this,sn,"f")||lc(this,sn,new Set(j.getValidEnumValues(this._def.values)),"f"),!Bi(this,sn,"f").has(e.data)){let a=j.objectValues(r);return x(i,{received:i.data,code:w.invalid_enum_value,options:a}),I}return ne(e.data)}get enum(){return this._def.values}};sn=new WeakMap;Yt.create=(t,e)=>new Yt({values:t,typeName:O.ZodNativeEnum,...q(e)});var _t=class extends F{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==R.promise&&r.common.async===!1)return x(r,{code:w.invalid_type,expected:R.promise,received:r.parsedType}),I;let i=r.parsedType===R.promise?r.data:Promise.resolve(r.data);return ne(i.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}};_t.create=(t,e)=>new _t({type:t,typeName:O.ZodPromise,...q(e)});var pe=class extends F{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===O.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:i}=this._processInputParams(e),a=this._def.effect||null,s={addIssue:l=>{x(i,l),l.fatal?r.abort():r.dirty()},get path(){return i.path}};if(s.addIssue=s.addIssue.bind(s),a.type==="preprocess"){let l=a.transform(i.data,s);if(i.common.async)return Promise.resolve(l).then(async c=>{if(r.value==="aborted")return I;let d=await this._def.schema._parseAsync({data:c,path:i.path,parent:i});return d.status==="aborted"?I:d.status==="dirty"||r.value==="dirty"?vr(d.value):d});{if(r.value==="aborted")return I;let c=this._def.schema._parseSync({data:l,path:i.path,parent:i});return c.status==="aborted"?I:c.status==="dirty"||r.value==="dirty"?vr(c.value):c}}if(a.type==="refinement"){let l=c=>{let d=a.refinement(c,s);if(i.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(i.common.async===!1){let c=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?I:(c.status==="dirty"&&r.dirty(),l(c.value),{status:r.value,value:c.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(c=>c.status==="aborted"?I:(c.status==="dirty"&&r.dirty(),l(c.value).then(()=>({status:r.value,value:c.value}))))}if(a.type==="transform")if(i.common.async===!1){let l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!un(l))return l;let c=a.transform(l.value,s);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:c}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>un(l)?Promise.resolve(a.transform(l.value,s)).then(c=>({status:r.value,value:c})):l);j.assertNever(a)}};pe.create=(t,e,r)=>new pe({schema:t,typeName:O.ZodEffects,effect:e,...q(r)});pe.createWithPreprocess=(t,e,r)=>new pe({schema:e,effect:{type:"preprocess",transform:t},typeName:O.ZodEffects,...q(r)});var we=class extends F{_parse(e){return this._getType(e)===R.undefined?ne(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};we.create=(t,e)=>new we({innerType:t,typeName:O.ZodOptional,...q(e)});var Fe=class extends F{_parse(e){return this._getType(e)===R.null?ne(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Fe.create=(t,e)=>new Fe({innerType:t,typeName:O.ZodNullable,...q(e)});var Gt=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),i=r.data;return r.parsedType===R.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Gt.create=(t,e)=>new Gt({innerType:t,typeName:O.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...q(e)});var Qt=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),i={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return ln(a)?a.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new he(i.common.issues)},input:i.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new he(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}};Qt.create=(t,e)=>new Qt({innerType:t,typeName:O.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...q(e)});var Cr=class extends F{_parse(e){if(this._getType(e)!==R.nan){let i=this._getOrReturnCtx(e);return x(i,{code:w.invalid_type,expected:R.nan,received:i.parsedType}),I}return{status:"valid",value:e.data}}};Cr.create=t=>new Cr({typeName:O.ZodNaN,...q(t)});var Im=Symbol("zod_brand"),cn=class extends F{_parse(e){let{ctx:r}=this._processInputParams(e),i=r.data;return this._def.type._parse({data:i,path:r.path,parent:r})}unwrap(){return this._def.type}},fn=class t extends F{_parse(e){let{status:r,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return s.status==="aborted"?I:s.status==="dirty"?(r.dirty(),vr(s.value)):this._def.out._parseAsync({data:s.value,path:i.path,parent:i})})();{let a=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?I:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:i.path,parent:i})}}static create(e,r){return new t({in:e,out:r,typeName:O.ZodPipeline})}},Xt=class extends F{_parse(e){let r=this._def.innerType._parse(e),i=a=>(un(a)&&(a.value=Object.freeze(a.value)),a);return ln(r)?r.then(a=>i(a)):i(r)}unwrap(){return this._def.innerType}};Xt.create=(t,e)=>new Xt({innerType:t,typeName:O.ZodReadonly,...q(e)});function pc(t,e={},r){return t?bt.create().superRefine((i,a)=>{var s,l;if(!t(i)){let c=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,d=(l=(s=c.fatal)!==null&&s!==void 0?s:r)!==null&&l!==void 0?l:!0,f=typeof c=="string"?{message:c}:c;a.addIssue({code:"custom",...f,fatal:d})}}):bt.create()}var Bm={object:le.lazycreate},O;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(O||(O={}));var Nm=(t,e={message:`Input not instance of ${t.name}`})=>pc(r=>r instanceof t,e),mc=gt.create,yc=Ft.create,Dm=Cr.create,qm=zt.create,gc=Mt.create,Fm=$t.create,zm=Sr.create,Mm=Lt.create,$m=Wt.create,Lm=bt.create,Wm=Ke.create,jm=Pe.create,Um=xr.create,Vm=Je.create,Hm=le.create,Zm=le.strictCreate,Ym=jt.create,Gm=Ni.create,Qm=Ut.create,Xm=qe.create,Km=Di.create,Jm=Tr.create,ey=Rr.create,ty=qi.create,ry=Vt.create,ny=Ht.create,iy=Zt.create,ay=Yt.create,oy=_t.create,sc=pe.create,sy=we.create,uy=Fe.create,ly=pe.createWithPreprocess,cy=fn.create,fy=()=>mc().optional(),dy=()=>yc().optional(),hy=()=>gc().optional(),py={string:t=>gt.create({...t,coerce:!0}),number:t=>Ft.create({...t,coerce:!0}),boolean:t=>Mt.create({...t,coerce:!0}),bigint:t=>zt.create({...t,coerce:!0}),date:t=>$t.create({...t,coerce:!0})},my=I,xe=Object.freeze({__proto__:null,defaultErrorMap:wr,setErrorMap:mm,getErrorMap:Oi,makeIssue:Ii,EMPTY_PATH:ym,addIssueToContext:x,ParseStatus:ee,INVALID:I,DIRTY:vr,OK:ne,isAborted:lo,isDirty:co,isValid:un,isAsync:ln,get util(){return j},get objectUtil(){return uo},ZodParsedType:R,getParsedType:yt,ZodType:F,datetimeRegex:dc,ZodString:gt,ZodNumber:Ft,ZodBigInt:zt,ZodBoolean:Mt,ZodDate:$t,ZodSymbol:Sr,ZodUndefined:Lt,ZodNull:Wt,ZodAny:bt,ZodUnknown:Ke,ZodNever:Pe,ZodVoid:xr,ZodArray:Je,ZodObject:le,ZodUnion:jt,ZodDiscriminatedUnion:Ni,ZodIntersection:Ut,ZodTuple:qe,ZodRecord:Di,ZodMap:Tr,ZodSet:Rr,ZodFunction:qi,ZodLazy:Vt,ZodLiteral:Ht,ZodEnum:Zt,ZodNativeEnum:Yt,ZodPromise:_t,ZodEffects:pe,ZodTransformer:pe,ZodOptional:we,ZodNullable:Fe,ZodDefault:Gt,ZodCatch:Qt,ZodNaN:Cr,BRAND:Im,ZodBranded:cn,ZodPipeline:fn,ZodReadonly:Xt,custom:pc,Schema:F,ZodSchema:F,late:Bm,get ZodFirstPartyTypeKind(){return O},coerce:py,any:Lm,array:Vm,bigint:qm,boolean:gc,date:Fm,discriminatedUnion:Gm,effect:sc,enum:iy,function:ty,instanceof:Nm,intersection:Qm,lazy:ry,literal:ny,map:Jm,nan:Dm,nativeEnum:ay,never:jm,null:$m,nullable:uy,number:yc,object:Hm,oboolean:hy,onumber:dy,optional:sy,ostring:fy,pipeline:cy,preprocess:ly,promise:oy,record:Km,set:ey,strictObject:Zm,string:mc,symbol:zm,transformer:sc,tuple:Xm,undefined:Mm,union:Ym,unknown:Wm,void:Um,NEVER:my,ZodIssueCode:w,quotelessJson:pm,ZodError:he});var yy=xe.object({id:xe.number().int(),apiName:xe.string(),date:xe.date(),dataReceived:xe.boolean(),downloadTime:xe.number().nonnegative().nullable(),responseTime:xe.number().nonnegative().nullable(),totalTime:xe.number().nonnegative().nullable(),contentSize:xe.number().nonnegative().nullable(),error:xe.string().nullable()}),bc=xe.array(yy);import{writeFile as gy}from"fs/promises";import*as Fi from"path";function ho(t,e,r){try{let i=Fi.parse(r).name.replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),a=new Date().toISOString().replace(/[:.]/g,"-").replace(/[Z]/g,""),s=`${i}_${a}.csv`,l=Fi.join(t,s);gy(l,e,{encoding:"utf-8"})}catch(i){throw i instanceof Error?new Error(`Error saving CSV file: ${i.message}`):i}}import*as Mi from"path";import{fileURLToPath as by}from"url";var _y=Mi.dirname(by(import.meta.url)),po=Mi.join(_y,"../data"),_c=await yu(po),vy=_c===null?[]:io(_c,Pi),zi=bc.safeParse(vy),mo=await pu(mu);mo.forEach(t=>{t.dataReceived||console.error(`Error: No data received for ${t.apiName}`)});zi.success?(zi.data.push(...mo),ho(po,Ai(zi.data),"benchmark")):(console.log(`Error parsing data: ${zi.error}`),ho(po,Ai(mo),"benchmark"));
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
//# sourceMappingURL=main.js.map
